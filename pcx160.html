<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCX 160 Tuner (Fixed UI Edition)</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* --- ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PCX 160 (‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Wave 110i) --- */
        :root { 
            --bg: #050505; 
            --card-bg: #111; 
            --primary: #00eaff; /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤ Cyan */
            --primary-dark: #008c99;
            --text: #ffffff; 
            --border: #333; 
            --gold: #FFD700;
        }

        body {
            font-family: 'Kanit', sans-serif; 
            background-color: var(--bg); 
            color: var(--text); 
            margin: 0; padding: 20px;
            background-image: linear-gradient(rgba(0,0,0,0.92), rgba(0,0,0,0.92)), url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
        }
        
        .container { max-width: 850px; margin: 0 auto; padding-bottom: 40px; margin-top: 60px; }
        
        /* NAV BAR */
        .top-nav {
            position: fixed; top: 15px; left: 50%; transform: translateX(-50%); z-index: 10000;
            display: flex; gap: 8px; background: rgba(0,0,0,0.9);
            padding: 8px 15px; border-radius: 50px; border: 1px solid #444;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5); backdrop-filter: blur(5px);
            white-space: nowrap;
        }
        .nav-item {
            text-decoration: none; color: #888; padding: 6px 15px;
            border-radius: 20px; font-weight: bold; font-size: 0.9rem;
            transition: 0.3s; display: flex; align-items: center; gap: 5px;
        }
        .nav-item:hover { color: #fff; background: rgba(255,255,255,0.1); }
        .nav-item.active { background: var(--primary); color: #000; box-shadow: 0 0 15px var(--primary); }

        /* HEADER */
        .header-box { text-align: center; margin-bottom: 30px; border: 2px solid var(--primary); padding: 25px; border-radius: 20px; background: radial-gradient(circle, rgba(0, 234, 255, 0.15) 0%, rgba(0,0,0,1) 100%); box-shadow: 0 0 30px rgba(0, 234, 255, 0.15); position: relative; overflow: hidden; }
        h1 { margin: 0; font-style: italic; text-transform: uppercase; font-size: 2.2rem; line-height: 1.2; text-shadow: 2px 2px 0px #000; }
        .kimx-text { color: var(--primary); font-weight: 900; text-shadow: 0 0 15px var(--primary); }

        /* PRESETS */
        .preset-section { margin-bottom: 25px; text-align: center; }
        .preset-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; margin-top: 10px; }
        .preset-btn { 
            background: #222; border: 1px solid #444; color: #fff; padding: 15px 10px; 
            border-radius: 12px; cursor: pointer; transition: 0.2s; font-size: 0.9rem; 
            display: flex; flex-direction: column; align-items: center; gap: 8px; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .preset-btn i { font-size: 1.5rem; color: var(--primary); }
        .preset-btn:hover { background: #333; transform: translateY(-3px); border-color: var(--primary); box-shadow: 0 5px 15px rgba(0, 234, 255, 0.2); }

        /* DASHBOARD (‡∏õ‡∏£‡∏±‡∏ö Grid ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö 4 ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á PCX) */
        .dashboard { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; }
        .stat-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 15px; padding: 20px; text-align: center; position: relative; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .stat-card.highlight { border: 2px solid var(--primary); background: linear-gradient(180deg, #1a1a1a 0%, #000 100%); box-shadow: 0 0 20px rgba(0, 234, 255, 0.1); }
        .stat-value { font-size: 4rem; font-weight: 800; color: var(--primary); text-shadow: 0 0 25px rgba(0, 234, 255, 0.4); line-height: 1; }
        .stat-value-sm { font-size: 2.5rem; font-weight: 800; color: #fff; line-height: 1; }
        .stat-label { font-size: 0.8rem; color: #888; letter-spacing: 1px; margin-top: 5px; text-transform: uppercase; }

        /* CONTROLS */
        .control-section { background: var(--card-bg); padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid var(--border); transition: 0.3s; }
        .control-section:hover { border-left-color: var(--primary); box-shadow: -5px 0 15px rgba(0, 234, 255, 0.1); }
        .section-header { font-size: 1.1rem; color: #fff; margin-bottom: 15px; font-weight: bold; display: flex; align-items: center; gap: 10px; justify-content: space-between; }
        .section-header i { color: var(--primary); }
        
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        label { display: block; margin-bottom: 6px; font-size: 0.85rem; color: #aaa; }
        input, select { width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: #fff; border-radius: 8px; font-family: 'Kanit'; font-size: 1rem; transition: 0.2s; box-sizing: border-box; }
        input:focus, select:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 10px rgba(0, 234, 255, 0.2); }
        
        /* CAM/BUTTON GRID */
        .cam-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 8px; }
        .cam-btn { background: #222; border: 1px solid #444; color: #aaa; padding: 12px; text-align: center; border-radius: 8px; cursor: pointer; font-size: 0.9rem; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
        .cam-btn:hover { background: #333; }
        .cam-btn.active { background: var(--primary); color: #000; font-weight: bold; border-color: var(--primary); box-shadow: 0 0 15px var(--primary); transform: scale(1.02); }

        /* BUTTON GROUP */
        .btn-group { display: flex; gap: 10px; margin-bottom: 30px; }
        .run-btn { 
            flex: 3; padding: 15px; background: linear-gradient(45deg, #00eaff, #007acc); 
            color: #000; font-size: 1.5rem; font-weight: 900; border: none; 
            border-radius: 10px; cursor: pointer; text-transform: uppercase; 
            font-style: italic; box-shadow: 0 5px 15px rgba(0, 234, 255, 0.3); transition: 0.3s; 
        }
        .run-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0, 234, 255, 0.5); }
        .reset-btn { flex: 1; background: #333; color: #aaa; border: 1px solid #555; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: 600; transition: 0.2s; }
        .reset-btn:hover { background: #444; color: #fff; }

        /* AI LOG */
        .ai-log { margin-top: 30px; padding: 20px; background: #0a0a0a; border: 1px solid #333; border-radius: 12px; box-shadow: inset 0 0 20px rgba(0,0,0,0.8); position: relative; overflow: hidden; }
        .ai-log::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, var(--primary), transparent); animation: scan 2s infinite; }
        .log-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 10px; }
        .ai-msg { padding: 12px 15px; background: #151515; border-left: 4px solid #555; border-radius: 4px; font-size: 0.85rem; color: #ccc; display: flex; flex-direction: column; animation: slideIn 0.3s ease-out; }
        .msg-danger { border-left-color: #ff3333; background: rgba(255, 51, 51, 0.05); color: #ffaaaa; }
        .msg-warn { border-left-color: #ffaa00; background: rgba(255, 170, 0, 0.05); color: #ffeebb; }
        .msg-info { border-left-color: #00eaff; background: rgba(0, 234, 255, 0.05); color: #ccf9ff; }
        .msg-success { border-left-color: #00ff66; background: rgba(0, 255, 102, 0.05); color: #bbffdd; }
        .ai-shop-btn { display: inline-block; margin-top: 8px; background: #ee4d2d; color: white; font-size: 0.8rem; padding: 5px 12px; border-radius: 4px; text-decoration: none; font-weight: bold; transition: 0.2s; width: fit-content; }

        /* PRODUCT BOX (Small) */
        .product-info-box { margin-top: 15px; padding: 15px; background: #1a1a1a; border-left: 4px solid var(--primary); border-radius: 8px; display: flex; justify-content: space-between; align-items: center; gap: 15px; }
        .spec-title { color: var(--primary); font-weight: bold; font-size: 1rem; }
        .spec-detail { font-size: 0.85rem; color: #ccc; }
        .shopee-btn { background: #ee4d2d; color: #fff; padding: 6px 15px; border-radius: 5px; font-weight: 600; text-decoration: none; display: inline-flex; align-items: center; gap: 5px; font-size: 0.8rem; border: none; transition: 0.2s; white-space: nowrap; }
        .shopee-btn:hover { background: #ff6644; }

        /* ADS & PARTNER */
        .partner-section { margin-top: 35px; padding: 20px; background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%); border: 1px dashed var(--gold); border-radius: 12px; text-align: center; position: relative; }
        .partner-badge { position: absolute; top: -16px; left: 50%; transform: translateX(-50%); background: var(--gold); color: #000; font-weight: 800; font-size: 0.9rem; padding: 6px 20px; border-radius: 25px; border: 3px solid #111; z-index: 10; }
        .fb-btn { background: #1877F2; color: #fff; padding: 8px 20px; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 8px; }

        /* SUPPORT & LOADER */
        .support-btn { width: 100%; padding: 15px; background: transparent; border: 2px solid var(--gold); color: var(--gold); border-radius: 12px; cursor: pointer; margin-top: 30px; font-size: 1.1rem; font-weight: 800; text-transform: uppercase; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .support-btn:hover { background: var(--gold); color: #000; }
        
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 20000; justify-content: center; align-items: center; }
        .modal-content { background: #111; border: 2px solid var(--primary); padding: 30px; border-radius: 20px; text-align: center; width: 300px; position: relative; }
        .close-modal { position: absolute; top: 10px; right: 15px; color: #888; cursor: pointer; font-size: 1.5rem; }

        #kimx-loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 99999; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 0.6s ease; }
        .spinner-box { position: relative; width: 80px; height: 80px; display: flex; justify-content: center; align-items: center; }
        .spinner { width: 100%; height: 100%; border: 4px solid rgba(0, 234, 255, 0.2); border-top: 4px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
        .spinner-logo { position: absolute; font-size: 1.5rem; color: #fff; font-weight: bold; }
        .loader-text { margin-top: 20px; color: #888; letter-spacing: 3px; font-size: 0.9rem; animation: blink 1.5s infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } @keyframes blink { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } } .loaded { opacity: 0; pointer-events: none; }
        @keyframes scan { 0% {transform: translateX(-100%);} 100% {transform: translateX(100%);} }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

        /* ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏£‡πå‡∏™‡∏π‡∏ï‡∏£ (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà) */
        .share-btn {
            width: 100%; margin-top: 15px; margin-bottom: 25px; padding: 15px;
            background: linear-gradient(45deg, #00eaff, #0088ff); /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤ PCX */
            color: #fff; font-weight: 900; font-size: 1.1rem;
            border: none; border-radius: 12px; cursor: pointer;
            box-shadow: 0 0 15px rgba(0, 234, 255, 0.3);
            transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .share-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 25px rgba(0, 234, 255, 0.6);
            filter: brightness(1.1);
        }
        .share-btn:active { transform: scale(0.95); }

        /* CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏ä‡∏£‡πå (‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà) */
        .share-card-box {
            width: 600px; padding: 40px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            border: 3px solid var(--primary); border-radius: 25px;
            text-align: center; font-family: 'Kanit', sans-serif; color: #fff;
            box-shadow: 0 0 50px rgba(0,0,0,0.8); position: relative; overflow: hidden;
        }
        .share-card-box::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to bottom, #111, #000); /* ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÅ‡∏ó‡∏ô‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô CORS */
            opacity: 0.7; z-index: 0;
        }
        .card-header, .card-specs-grid, .card-results, .card-footer { position: relative; z-index: 1; }
        .card-logo { height: 60px; margin-bottom: 10px; filter: drop-shadow(0 0 10px rgba(0, 234, 255, 0.5)); }
        .card-title { color: var(--primary); font-size: 2.5rem; margin: 0 0 30px 0; text-transform: uppercase; font-weight: 900; }

        .card-specs-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; text-align: left;
            background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; border: 1px solid rgba(0, 234, 255, 0.2);
        }
        .spec-item { font-size: 1.3rem; color: #ddd; }
        .spec-item i { color: var(--primary); margin-right: 10px; width: 25px; text-align: center;}
        .spec-item span { font-weight: 800; color: #fff; margin-left: 5px; }

        .card-results { display: flex; gap: 20px; margin-bottom: 30px; }
        .result-box-card { flex: 1; padding: 25px 10px; border-radius: 15px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.1); }
        .result-box-card.speed { border-color: var(--primary); background: linear-gradient(to bottom, rgba(0,234,255,0.1), rgba(0,0,0,0.2)); }
        .result-box-card.hp { border-color: #ffaa00; background: linear-gradient(to bottom, rgba(255,170,0,0.1), rgba(0,0,0,0.2)); }
        .result-box-card .lbl { font-size: 1.1rem; color: #aaa; margin-bottom: 10px; }
        .result-box-card .val { font-size: 3.5rem; font-weight: 900; line-height: 1; text-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .result-box-card.speed .val { color: var(--primary); }
        .result-box-card.hp .val { color: #ffaa00; }
        .card-footer { font-size: 1.1rem; color: #888; letter-spacing: 1px; }

        /* RESPONSIVE */
        @media screen and (max-width: 600px) {
            .stat-value { font-size: 3rem !important; }
            .grid-2 { grid-template-columns: 1fr; }
            .product-info-box { flex-direction: column; text-align: center; }
            .shopee-btn { width: 100%; justify-content: center; }
            .btn-group { flex-direction: column; }
        }
    </style>
</head>
<body>

    <div id="kimx-loader">
        <div class="spinner-box"><div class="spinner"></div><div class="spinner-logo">KIMX</div></div>
        <div class="loader-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
    </div>

    <div class="top-nav">
        <a href="index.html" class="nav-item"><i class="fas fa-home"></i> HOME</a>
        <a href="wave125i.html" class="nav-item"><i class="fas fa-motorcycle"></i> 125i</a>
        <a href="wave110i.html" class="nav-item"><i class="fas fa-motorcycle"></i> 110i</a>
        <a href="pcx160.html" class="nav-item active"><i class="fas fa-space-shuttle"></i> PCX160</a>
    </div>

    <div class="container">
        <div class="header-box">
            <h1>PCX 160 <span class="kimx-text">eSP+</span></h1>
            <div style="font-size: 0.9rem; color: #888; margin-top: 5px; letter-spacing: 2px;">SCOOTER TUNER V.FINAL</div>
        </div>

        <div class="preset-section">
            <div style="color:var(--gold); font-weight:bold; letter-spacing:1px; margin-bottom:5px; font-size:0.9rem;">
                <i class="fas fa-magic"></i> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (ONE-CLICK RECIPES)
            </div>
            <div class="preset-grid">
                <div class="preset-btn" onclick="applyPreset('step1')">
                    <i class="fas fa-motorcycle"></i> <span>‡∏™‡∏π‡∏ï‡∏£‡πÑ‡∏•‡πà‡∏Ç‡πâ‡∏≤‡∏á<br>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
                </div>
                <div class="preset-btn" onclick="applyPreset('step2')">
                    <i class="fas fa-road"></i> <span>‡∏•‡∏π‡∏Å‡πÄ‡∏î‡∏¥‡∏°<br>‡∏î‡∏±‡∏ô‡πÇ‡∏•</span>
                </div>
                <div class="preset-btn" onclick="applyPreset('step3')">
                    <i class="fas fa-bolt"></i> <span>‡∏•‡∏π‡∏Å 60<br>‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö</span>
                </div>
                <div class="preset-btn" onclick="applyPreset('step4')">
                    <i class="fas fa-rocket"></i> <span>Open<br>‡πÄ‡∏ï‡πá‡∏°‡∏Å‡∏£‡∏≤‡∏ü</span>
                </div>
            </div>
        </div>

        <div class="dashboard">
            <div class="stat-card highlight">
                <div class="stat-value" id="d_speed">0</div>
                <div class="stat-label">GPS / TOP SPEED (KM/H)</div>
            </div>
            <div class="stat-card highlight">
                <div class="stat-value" id="d_hp" style="color:var(--gold);">15.8</div>
                <div class="stat-label" style="color:var(--gold);">EST. HORSEPOWER (HP)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value-sm" id="d_rpm">10.5</div>
                <div class="stat-label">RPM LIMIT</div>
            </div>
            <div class="stat-card">
                <div class="stat-value-sm" id="d_cc">157</div>
                <div class="stat-label">CC ENGINE</div>
            </div>
        </div>

        <div class="btn-group">
            <button class="run-btn" onclick="runDyno()"><i class="fas fa-tachometer-alt"></i> TEST DYNO RUN</button>
            <button class="reset-btn" onclick="resetDefaults()"><i class="fas fa-undo"></i> ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</button>
        </div>
        
        <button class="share-btn" onclick="captureImage(this)">
            <i class="fas fa-camera"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
        </button>

        <form id="form" onchange="runDyno(false)">
            
            <div class="control-section">
                <div class="section-header"><i class="fas fa-cogs"></i> ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏ô‡∏ï‡πå & ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</div>
                <div class="grid-2">
                    <div><label>‡∏•‡∏π‡∏Å‡∏™‡∏π‡∏ö (mm)</label><input type="number" id="piston" value="60" placeholder="60-66"></div>
                    <div><label>‡∏ä‡πà‡∏ß‡∏á‡∏ä‡∏±‡∏Å (mm)</label><input type="number" id="stroke" value="55.5"></div>
                    <div><label>‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏•‡∏¥‡πâ‡∏ô‡πÄ‡∏£‡πà‡∏á</label><select id="tb"><option value="std">‡∏•‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏° (28mm)</option><option value="ream">‡∏•‡∏¥‡πâ‡∏ô‡∏•‡πâ‡∏ß‡∏á (30mm)</option><option value="cnc32">‡∏•‡∏¥‡πâ‡∏ô CNC 32mm</option><option value="open">‡∏•‡∏¥‡πâ‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á 34mm+ (Open)</option></select></div>
                    <div><label>‡∏Å‡∏£‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</label><select id="air"><option value="std">‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© (‡πÄ‡∏î‡∏¥‡∏°)</option><option value="ss">‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏•‡∏™ (Hurricane)</option><option value="vel">‡∏õ‡∏≤‡∏Å‡πÅ‡∏ï‡∏£‡∏î‡∏π‡∏î‡∏™‡∏î (Velocity)</option></select></div>
                </div>
                
                <div style="border-top: 1px solid #333; padding-top: 15px; margin-top: 15px;">
                    <div class="section-header" style="font-size:0.95rem;"><span><i class="fas fa-wave-square"></i> ‡πÅ‡∏Ñ‡∏°‡∏ä‡∏≤‡∏£‡πå‡∏ü</span><span style="font-size:0.8rem; color:#666;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡πÄ‡∏õ‡∏Ñ</span></div>
                    <div class="cam-grid">
                        <div class="cam-btn active" id="btn_cam_std" onclick="setCam('std', this)">‡πÄ‡∏î‡∏¥‡∏°</div>
                        <div class="cam-btn" id="btn_cam_touring" onclick="setCam('touring', this)">Touring</div>
                        <div class="cam-btn" id="btn_cam_racing" onclick="setCam('racing', this)">Racing</div>
                    </div>
                    <input type="hidden" id="cam" value="std">
                    <div id="cam_display_area"></div>
                </div>

                <div style="border-top: 1px solid #333; padding-top: 15px; margin-top: 15px;">
                    <div class="section-header" style="font-size:0.95rem;"><span><i class="fas fa-hammer"></i> ‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö (Connecting Rod)</span></div>
                    <div class="cam-grid">
                        <div class="cam-btn active" id="btn_rod_0" onclick="setRod('0', this)">‡πÄ‡∏î‡∏¥‡∏°</div>
                        <div class="cam-btn" id="btn_rod_2" onclick="setRod('2', this)">‡∏ä‡∏±‡∏Å 2 (+2mm)</div>
                        <div class="cam-btn" id="btn_rod_3" onclick="setRod('3', this)">‡∏ä‡∏±‡∏Å 3 (+3mm)</div>
                        <div class="cam-btn" id="btn_rod_5" onclick="setRod('5', this)">‡∏ä‡∏±‡∏Å 5 (+5mm)</div>
                    </div>
                    <input type="hidden" id="rod" value="0">
                    <div id="rod_display_area"></div>
                </div>
            </div>

            <div class="control-section" style="border-left-color: #ff00ff;">
                <div class="section-header"><i class="fas fa-balance-scale"></i> CVT & ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡πà‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á</div>
                
                <div style="margin-bottom:15px;">
                    <label style="color:#ff00ff; font-weight:bold;">1. ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏Ñ‡∏ô‡∏Ç‡∏µ‡πà + ‡∏Ñ‡∏ô‡∏ã‡πâ‡∏≠‡∏ô (kg)</label>
                    <input type="number" id="rider_weight" value="65" placeholder="‡πÄ‡∏ä‡πà‡∏ô 65" onchange="runDyno()">
                </div>

                <div style="border-top: 1px solid #333; padding-top: 15px; margin-bottom:15px;">
                    <label style="color:#ff00ff; font-weight:bold; margin-bottom:10px;">2. ‡∏™‡∏π‡∏ï‡∏£‡πÑ‡∏•‡πà‡πÄ‡∏°‡πá‡∏î (Roller Weights)</label>
                    <div class="grid-2">
                        <div><label>‡πÄ‡∏°‡πá‡∏î‡∏ä‡∏∏‡∏î A (3 ‡πÄ‡∏°‡πá‡∏î)</label><input type="number" id="roller_a" value="13" placeholder="‡∏Å‡∏£‡∏±‡∏° (g)"></div>
                        <div><label>‡πÄ‡∏°‡πá‡∏î‡∏ä‡∏∏‡∏î B (3 ‡πÄ‡∏°‡πá‡∏î)</label><input type="number" id="roller_b" value="13" placeholder="‡∏Å‡∏£‡∏±‡∏° (g)"></div>
                    </div>
                    <div id="roller_avg_display" style="text-align:center; color:var(--primary); font-size:0.9rem; margin-top:5px;"></div>
                </div>
                
                <div class="grid-2" style="border-top: 1px solid #333; padding-top: 15px;">
                    <div>
                        <label>3. ‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡∏ó‡πâ‡∏≤‡∏¢ (Gear Ratio)</label>
                        <select id="final_gear" onchange="runDyno()">
                            <option value="13">13T (‡∏ï‡πâ‡∏ô‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô / Stunt / ‡πÅ‡∏Ç‡πà‡∏á 201m)</option>
                            <option value="14">14T (‡∏≠‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏î‡∏µ‡∏î / Drag 402m)</option>
                            <option value="15">15T (‡πÄ‡∏£‡πà‡∏á‡πÅ‡∏ã‡∏á‡πÑ‡∏ß / ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏Ç‡∏≤ / ‡πÅ‡∏ö‡∏Å‡∏Ç‡∏≠‡∏á)</option>
                            <option value="std" selected>16T (‡πÄ‡∏î‡∏¥‡∏°‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô / ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)</option>
                        </select>
                    </div>
                    <div>
                        <label>‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏ó‡∏≠‡∏£‡πå‡∏Ñ</label>
                        <select id="spring">
                            <option value="std">‡∏™‡∏õ‡∏£‡∏¥‡∏á‡πÄ‡∏î‡∏¥‡∏°</option>
                            <option value="1200">‡πÅ‡∏ï‡πà‡∏á 1200 RPM</option>
                            <option value="1500">‡πÅ‡∏ï‡πà‡∏á 1500 RPM</option>
                        </select>
                    </div>
                </div>
                
                <div style="border-top: 1px solid #333; padding-top: 15px; margin-top: 15px;">
                    <div class="section-header" style="font-size:0.95rem;"><span><i class="fas fa-compact-disc"></i> ‡∏ä‡∏≤‡∏°‡πÅ‡∏ï‡πà‡∏á (Variator)</span></div>
                    <div class="cam-grid">
                        <div class="cam-btn active" id="btn_var_std" onclick="setVariator('std', this)">‡∏ä‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏°</div>
                        <div class="cam-btn" id="btn_var_step1" onclick="setVariator('step1', this)">‡∏Ç‡∏π‡∏î‡∏£‡πà‡∏≠‡∏á (Step 1)</div>
                        <div class="cam-btn" id="btn_var_step2" onclick="setVariator('step2', this)">CNC (Step 2)</div>
                    </div>
                    <input type="hidden" id="variator" value="std">
                    <div id="var_display_area"></div>
                </div>
                <div style="border-top: 1px solid #333; padding-top: 15px; margin-top: 15px;">
                    <div class="section-header" style="font-size:0.95rem;"><span><i class="fas fa-circle-notch"></i> ‡∏Ñ‡∏•‡∏±‡∏ó‡∏ä‡πå‡∏´‡∏•‡∏±‡∏á (Rear Clutch)</span></div>
                    <div class="cam-grid">
                        <div class="cam-btn active" id="btn_clutch_std" onclick="setClutch('std', this)">‡πÄ‡∏î‡∏¥‡∏°</div>
                        <div class="cam-btn" id="btn_clutch_carbon" onclick="setClutch('carbon', this)">‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô</div>
                    </div>
                    <input type="hidden" id="clutch" value="std">
                    <div id="clutch_display_area"></div>
                </div>
            </div>

            <div class="control-section" style="border-left-color: var(--primary);">
                <div class="section-header"><i class="fas fa-bolt"></i> ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü & ‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î</div>
                <div style="margin-bottom: 15px;">
                  <label style="color:var(--primary); font-weight:bold; margin-bottom:10px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î (Injector Size)</label>
                   <div class="cam-grid" style="grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));">
                        <div class="cam-btn active" id="btn_inj_std" onclick="setInjector('std', this)">160cc</div>
                        <div class="cam-btn" id="btn_inj_185" onclick="setInjector('185', this)">185cc</div> <div class="cam-btn" id="btn_inj_210" onclick="setInjector('210', this)">210cc</div> <div class="cam-btn" id="btn_inj_forza" onclick="setInjector('forza', this)">260cc</div>
                        <div class="cam-btn" id="btn_inj_xmax" onclick="setInjector('xmax', this)">320cc</div>
                    </div>
                    <input type="hidden" id="inj" value="std">
                    <div id="inj_display_area"></div>
                </div>
                <div class="grid-2" style="border-top: 1px solid #333; padding-top: 15px;">
                    <div><label>‡∏Å‡∏•‡πà‡∏≠‡∏á ECU</label><select id="ecu"><option value="std">‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° (‡∏ï‡∏±‡∏î 10.5k)</option><option value="remap">Remap (11.5k)</option><option value="standalone">Standalone (12.5k)</option></select></div>
                    <div>
    <label>‡∏Ñ‡∏≠‡∏¢‡∏•‡πå‡∏´‡∏±‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô</label>
    <select id="coil" onchange="setCoil(this)">
        <option value="std">‡∏Ñ‡∏≠‡∏¢‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°</option>
        <option value="mod">‡∏Ñ‡∏≠‡∏¢‡∏•‡πå‡πÅ‡∏ï‡πà‡∏á (‡πÑ‡∏ü‡πÅ‡∏£‡∏á)</option>
    </select>
    <div id="coil_display_area"></div>
</div>
            </div>

            <div class="control-section" style="border-left-color: #00ffaa;">
                <div class="section-header"><i class="fas fa-snowflake"></i> ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô & ‡∏ó‡πà‡∏≠‡πÑ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢</div>
                
                <div style="margin-bottom: 15px;">
                    <label style="color:#00ffaa; font-weight:bold; margin-bottom:10px;">‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô</label>
                    <div class="cam-grid">
                        <div class="cam-btn active" id="btn_cool_std" onclick="setCooling('std', this)">‡∏´‡∏°‡πâ‡∏≠‡∏ô‡πâ‡∏≥‡πÄ‡∏î‡∏¥‡∏°</div>
                        <div class="cam-btn" id="btn_cool_big" onclick="setCooling('big', this)">‡∏´‡∏°‡πâ‡∏≠‡∏ô‡πâ‡∏≥‡∏™‡∏£‡πâ‡∏≤‡∏á</div>
                        <div class="cam-btn" id="btn_cool_elec" onclick="setCooling('elec', this)">‡∏ß‡∏≤‡∏ß‡∏•‡πå‡∏ô‡πâ‡∏≥‡πÅ‡∏ï‡πà‡∏á</div>
                    </div>
                    <input type="hidden" id="cooling" value="std">
                    <div id="cool_display_area"></div>
                </div>

                <div style="border-top: 1px solid #333; padding-top: 15px;">
                    <div class="section-header" style="font-size:0.95rem;"><span><i class="fas fa-fire-flame-curved"></i> ‡∏ó‡πà‡∏≠‡πÑ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢</span></div>
                    <div class="cam-grid">
                        <div class="cam-btn active" id="btn_ex_std" onclick="setExhaust('std', this)">‡∏ó‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°</div>
                        <div class="cam-btn" id="btn_ex_mok" onclick="setExhaust('mok', this)">‡∏ú‡πà‡∏≤‡∏´‡∏°‡∏Å</div>
                        <div class="cam-btn" id="btn_ex_dang" onclick="setExhaust('dang', this)">‡∏ú‡πà‡∏≤‡∏î‡∏±‡∏á</div>
                    </div>
                    <input type="hidden" id="ex_type" value="std">
                    <div id="ex_display_area"></div>
                </div>

                <div class="grid-2" style="border-top: 1px solid #333; padding-top: 15px; margin-top: 15px;">
                    <div><label>‡∏´‡∏±‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô</label><select id="plug"><option value="std">‡πÄ‡∏î‡∏¥‡∏° (Standard)</option><option value="iri8">Iridium ‡πÄ‡∏ö‡∏≠‡∏£‡πå 8</option><option value="iri9">Iridium ‡πÄ‡∏ö‡∏≠‡∏£‡πå 9</option></select></div>
                    <div><label>‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏≠‡∏ó‡πà‡∏≠</label><select id="ex_size"><option value="25">25mm (‡πÄ‡∏î‡∏¥‡∏°)</option><option value="28">28mm</option><option value="32">32mm</option><option value="35">35mm+</option></select></div>
                </div>
            </div>

            <div class="control-section" style="border-left-color: var(--gold);">
                <div class="section-header"><i class="fas fa-star"></i> KIMX OPTION</div>
                <div class="grid-2">
                    <div><label>‡πÑ‡∏•‡πà‡πÄ‡∏ö‡∏≤</label><select id="weight"><option value="std">‡∏£‡∏ñ‡πÄ‡∏î‡∏¥‡∏°</option><option value="street">‡∏ñ‡∏≠‡∏î‡∏Ç‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà</option><option value="drag">‡∏•‡πâ‡∏≠ 17 / ‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å</option></select></div>
                    <div><label>‡∏¢‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á</label><select id="tire"><option value="stock">‡∏¢‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏° (130/70)</option><option value="thin">‡∏¢‡∏≤‡∏á‡∏õ‡πâ‡∏≤‡∏¢ (50/100)</option></select></div>
                </div>
                <input type="hidden" id="style" value="balance">
            </div>
        </form>

        <div class="ai-log">
            <div style="font-weight:bold; color:var(--primary); margin-bottom:10px;"><i class="fas fa-robot"></i> KIMX MECHANIC SAYS:</div>
            <ul id="logs" class="log-list"></ul>
        </div>
        
        <div class="partner-section">
            <div class="partner-badge"><i class="fas fa-bullhorn"></i> ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ (OPPORTUNITY)</div>
            <div class="partner-content">
                <div style="font-size:1.1rem; font-weight:bold; color:#fff; margin-bottom:5px;">üöÄ ‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏≠‡∏∞‡πÑ‡∏´‡∏•‡πà‡πÅ‡∏ï‡πà‡∏á?</div>
                <div style="font-size:0.9rem; color:#aaa; margin-bottom:15px;">
                    ‡∏£‡πà‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤ ‡πÄ‡∏à‡∏≤‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏≤‡∏¢‡∏ã‡∏¥‡πà‡∏á‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á<br>
                    ‡∏Å‡∏≤‡∏£‡∏±‡∏ô‡∏ï‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏Å‡∏ß‡πà‡∏≤ <strong style="color:#00ff66;">10,000+ ‡∏Ñ‡∏ô/‡∏ß‡∏±‡∏ô!</strong>
                </div>
                <a href="https://www.facebook.com/chokhthwitantraklu?locale=th_TH" target="_blank" class="fb-btn">
                    <i class="fab fa-facebook-messenger"></i> ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏•‡∏á‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ (Chat)
                </a>
            </div>
        </div>

        <button class="support-btn" onclick="openModal()">
            <i class="fas fa-heart"></i> ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô (Donate)
        </button>
        <div style="text-align: center; margin-top: 30px; font-size: 0.8rem; color: #666; letter-spacing: 2px;">DEVELOPED BY KIMX TUNER AI</div>
    </div>

    <div id="supportModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal(event)">&times;</span>
            <h3 style="color:var(--primary); margin-top:0;"><i class="fas fa-heart"></i> ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤</h3>
            <img src="https://promptpay.io/0828057662.png" style="width:100%; border-radius:10px; margin:10px 0;">
            <div style="font-size:1.2rem; font-weight:bold; color:#fff;">082-805-7662</div>
            <div style="color:#888; font-size:0.9rem;">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå (PromptPay)</div>
        </div>
    </div>

    <div style="position: fixed; top: -9999px; left: -9999px;">
        <div id="share-card" class="share-card-box">
            <div class="card-header">
                <img src="kimxlogo.png" alt="KIMX Logo" class="card-logo">
                <h2 class="card-title">PCX 160 TEST RUN</h2>
            </div>
            
            <div class="card-specs-grid">
                <div class="spec-item">
                    <i class="fas fa-syringe"></i> ‡∏•‡∏π‡∏Å‡∏™‡∏π‡∏ö: <span id="card_piston">-</span> mm
                </div>
                 <div class="spec-item">
                    <i class="fas fa-cogs"></i> ‡πÑ‡∏•‡πà‡πÄ‡∏°‡πá‡∏î: <span id="card_roller">-</span>
                </div>
                <div class="spec-item" style="grid-column: span 2;">
                    <i class="fas fa-wrench"></i> ‡πÅ‡∏Ñ‡∏°: <span id="card_cam">-</span>
                </div>
            </div>
    
            <div class="card-results">
                <div class="result-box-card speed">
                    <div class="lbl">TOP SPEED (KM/H)</div>
                    <div class="val" id="card_speed">0</div>
                </div>
                <div class="result-box-card hp">
                    <div class="lbl">HORSEPOWER (HP)</div>
                    <div class="val" id="card_hp">0.0</div>
                </div>
            </div>
    
            <div class="card-footer">
                AI TUNER BY KIMX : www.kimxtuner-ai.site
            </div>
        </div>
    </div>

    <script>
        function openModal() { document.getElementById('supportModal').style.display = 'flex'; }
        function closeModal(e) { 
            if(e.target.id === 'supportModal' || e.target.classList.contains('close-modal')) 
            document.getElementById('supportModal').style.display = 'none'; 
        }

        window.addEventListener('load', () => {
            const loader = document.getElementById('kimx-loader');
            setTimeout(() => { loader.classList.add('loaded'); setTimeout(() => { loader.style.display = 'none'; }, 600); }, 1000);
            updateProductDisplay('cam_display_area', camData['std']); 
            updateProductDisplay('var_display_area', varData['std']); 
            updateProductDisplay('inj_display_area', injData['std']);
            updateProductDisplay('cool_display_area', coolingData['std']);
            updateProductDisplay('ex_display_area', exhaustData['std']);
            updateProductDisplay('rod_display_area', rodData['0']);           
            updateProductDisplay('coil_display_area', coilData['std']);
        });

        // --- DATA SETS ---
        const camData = {
            'std': { title: "‡πÅ‡∏Ñ‡∏°‡πÄ‡∏î‡∏¥‡∏°‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô (Standard OEM)", desc: "‡∏™‡πÄ‡∏õ‡∏Ñ‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÅ‡∏ó‡πâ ‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏Å‡∏£‡∏¥‡∏ö ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡πà‡∏≤‡∏¢‡∏ï‡∏•‡∏≤‡∏î / ‡∏™‡∏≤‡∏¢‡∏à‡∏≠‡∏î", link: "" },
            'touring': { title: "KIMX TOURING N.1 (‡πÄ‡∏ô‡πâ‡∏ô‡∏ï‡πâ‡∏ô-‡∏Å‡∏•‡∏≤‡∏á)", desc: "üöÄ ‡πÅ‡∏Å‡πâ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏£‡∏≠‡∏ö! ‡∏ö‡∏¥‡∏î‡∏ï‡∏¥‡∏î‡∏°‡∏∑‡∏≠ ‡πÄ‡∏£‡πà‡∏á‡πÅ‡∏ã‡∏á‡∏ó‡∏±‡∏ô‡πÉ‡∏à ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏ö‡∏ß‡∏≤‡∏•‡πå‡∏ß <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å‡πÄ‡∏î‡∏¥‡∏° - 60mm (‡∏Ç‡∏µ‡πà‡∏™‡∏ô‡∏∏‡∏Å ‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏™‡∏ö‡∏≤‡∏¢)", link: "https://s.shopee.co.th/qcTdcgm4B" },
            'racing': { title: "KIMX RACING N.2 (‡∏ó‡πâ‡∏≤‡∏¢‡∏•‡∏∂‡∏Å/‡∏î‡∏±‡∏ô‡πÇ‡∏•)", desc: "üèÅ ‡∏≠‡∏á‡∏®‡∏≤‡∏™‡∏π‡∏á ‡∏•‡∏¥‡∏ü‡∏ó‡πå‡∏¢‡∏Å 6.2mm+ ‡∏£‡∏µ‡∏î‡∏£‡∏≠‡∏ö‡∏õ‡∏•‡∏≤‡∏¢ ‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏î‡∏¥‡∏ô‡∏•‡∏∂‡∏Å! <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 62mm+ (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏ß‡∏≤‡∏•‡πå‡∏ß)", link: "https://s.shopee.co.th/qcTdcgm4B" }
        };

        const coilData = {
            'std': { 
                title: "‡∏Ñ‡∏≠‡∏¢‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô", 
                desc: "‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏ü‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏£‡∏ñ‡πÄ‡∏î‡∏¥‡∏°", 
                link: "" 
            },
            'mod': { 
                title: "‡∏Ñ‡∏≠‡∏¢‡∏•‡πå‡πÅ‡∏ï‡πà‡∏á (High Performance)", 
                desc: "‚ö° ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏ü‡∏à‡∏∏‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î! ‡πÄ‡∏ú‡∏≤‡πÑ‡∏´‡∏°‡πâ‡∏´‡∏°‡∏î‡∏à‡∏î ‡∏£‡∏≠‡∏ö‡∏°‡∏≤‡πÑ‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏Å‡πâ‡∏£‡∏ñ‡∏™‡∏∞‡∏î‡∏∏‡∏î", 
                link: "https://s.shopee.co.th/805fv7qxAu" 
            }
        };

        const varData = {
            'std': { title: "‡∏ä‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏°‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô (Standard OEM)", desc: "‡∏™‡πÄ‡∏õ‡∏Ñ‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÅ‡∏ó‡πâ ‡∏≠‡∏á‡∏®‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏ñ‡πÄ‡∏î‡∏¥‡∏°‡∏™‡∏ô‡∏¥‡∏ó / ‡πÄ‡∏ô‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏¢‡∏≤‡∏ß‡∏ô‡∏≤‡∏ô", link: "" },
            'step1': { title: "‡∏ä‡∏≤‡∏°‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏á‡∏®‡∏≤ (Step 1 Street)", desc: "üî• ‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏á‡∏®‡∏≤ 13.5¬∞ + ‡∏Ç‡∏π‡∏î‡∏£‡πà‡∏≠‡∏á‡πÄ‡∏°‡πá‡∏î! ‡∏ï‡πâ‡∏ô‡∏°‡∏≤‡πÑ‡∏ß ‡∏õ‡∏•‡∏≤‡∏¢‡πÑ‡∏´‡∏•‡∏•‡∏∂‡∏Å <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô / ‡πÑ‡∏•‡πà‡∏Ç‡πâ‡∏≤‡∏á (‡∏Ç‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏Å ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏£‡∏≠‡∏ö)", link: "https://s.shopee.co.th/2B7sxcsCEU" },
            'step2': { title: "‡∏ä‡∏≤‡∏° CNC ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö (Step 2 Racing)", desc: "üèÅ ‡∏Å‡∏±‡∏î‡∏•‡∏≤‡∏¢ CNC ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡πÄ‡∏õ‡πä‡∏∞! ‡∏™‡∏≤‡∏¢‡∏û‡∏≤‡∏ô‡πÑ‡∏ï‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏ö <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏™‡∏≤‡∏¢‡∏î‡∏±‡∏ô‡πÇ‡∏• / ‡∏£‡∏ñ‡∏ó‡∏≥‡∏•‡∏π‡∏Å 60mm+ (‡∏£‡∏µ‡∏î‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏ô‡∏∞‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)", link: "https://s.shopee.co.th/2B7sxcsCEU" }
        };

       const injData = {
            'std': { 
                title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 160cc (Standard OEM)", 
                desc: "‚öôÔ∏è ‡∏™‡πÄ‡∏õ‡∏Ñ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô 6 ‡∏£‡∏π ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏ñ‡πÄ‡∏î‡∏¥‡∏° - ‡∏•‡∏π‡∏Å 60 (‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏ä‡∏±‡∏Å) / ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô 95-E20", 
                link: "" 
            },
            '185': { 
                title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 185cc (6K / 6J ‡πÅ‡∏õ‡∏•‡∏á)", 
                desc: "‚ö° ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô 15% ‡πÅ‡∏Å‡πâ‡∏ö‡∏≤‡∏á! <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏ñ‡πÑ‡∏•‡πà‡∏Ç‡πâ‡∏≤‡∏á+‡πÅ‡∏Ñ‡∏° / ‡∏•‡∏π‡∏Å‡πÄ‡∏î‡∏¥‡∏°‡∏î‡∏±‡∏ô‡πÇ‡∏• E20-E85", 
                link: "https://s.shopee.co.th/9Kb3UywQLN" 
            },
            '210': { 
                title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 210cc (8W ‡∏ï‡∏±‡∏ß‡∏Æ‡∏¥‡∏ï)", 
                desc: "üî• ‡∏™‡πÄ‡∏ï‡πá‡∏õ‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°! ‡∏à‡πà‡∏≤‡∏¢‡∏û‡∏≠‡∏î‡∏µ‡πÄ‡∏õ‡πä‡∏∞ ‡πÑ‡∏°‡πà‡∏ó‡πà‡∏ß‡∏° <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 60mm-62mm (‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏ö/‡∏´‡∏±‡∏ß‡∏ô‡∏π‡∏ô) / ‡πÑ‡∏•‡πà E85", 
                link: "https://s.shopee.co.th/9Kb3UywQLN" 
            },
            'forza': { 
                title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 260cc (Forza 350 Spec)", 
                desc: "üî• ‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 10 ‡∏£‡∏π‡∏ù‡∏≠‡∏¢ ‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô ~20% ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö E85 <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 60mm (High Comp) - 63mm / ‡∏°‡∏µ‡∏ä‡∏±‡∏Å", 
                link: "https://s.shopee.co.th/9Kb3UywQLN" 
            },
            'xmax': { 
                title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 320cc (XMAX 300 Spec)", 
                desc: "üèÅ ‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 12 ‡∏£‡∏π ‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å! ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏ñ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞ <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 63mm ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ / ‡∏£‡∏ñ Open / ‡∏Å‡∏•‡πà‡∏≠‡∏á Standalone", 
                link: "https://s.shopee.co.th/9Kb3UywQLN"
            }
        };

        const coolingData = {
            'std': { title: "‡∏´‡∏°‡πâ‡∏≠‡∏ô‡πâ‡∏≥‡πÄ‡∏î‡∏¥‡∏°", desc: "‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô", link: "" },
            'big': { title: "‡∏´‡∏°‡πâ‡∏≠‡∏ô‡πâ‡∏≥‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏¢‡∏≤‡∏ß", desc: "‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°", link: "https://s.shopee.co.th/805fvGnFW0" },
            'elec': { title: "‡∏ß‡∏≤‡∏ß‡∏•‡πå‡∏ô‡πâ‡∏≥‡πÅ‡∏ï‡πà‡∏á", desc: "‡πÄ‡∏õ‡∏¥‡∏î‡∏ß‡∏≤‡∏ß‡∏•‡πå‡πÑ‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°! ‡∏ô‡πâ‡∏≥‡∏ß‡∏ô‡πÄ‡∏£‡πá‡∏ß ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Æ‡∏µ‡∏ó", link: "https://vt.tiktok.com/ZSHw39mBck7qD-kA9lj/" }
        };
        const exhaustData = {
            'std': { title: "‡∏ó‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô", desc: "‡πÄ‡∏á‡∏µ‡∏¢‡∏ö ‡∏ñ‡∏π‡∏Å‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ 100%", link: "" },
            'mok': { title: "‡∏ó‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏´‡∏°‡∏Å", desc: "‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ô‡∏∏‡πà‡∏° ‡∏ß‡∏¥‡πà‡∏á‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°", link: "https://s.shopee.co.th/6faILcOdn6t" },
            'dang': { title: "‡∏ó‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏î‡∏±‡∏á", desc: "‡πÑ‡∏™‡πâ‡πÅ‡∏õ‡πä‡∏ö/‡∏ï‡∏∞‡πÅ‡∏Å‡∏£‡∏á ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡πà‡∏ô ‡∏•‡∏±‡πà‡∏ô‡∏ó‡∏∏‡πà‡∏á", link: "https://s.shopee.co.th/6faILcOdn6" }
        };
        
        const rodData = {
            '0': { 
                title: "‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö‡πÄ‡∏î‡∏¥‡∏° (Standard)", 
                desc: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‡πÄ‡∏ô‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏à‡∏∏‡∏Å‡∏à‡∏¥‡∏Å", 
                link: "" 
            },
            '2': { 
                title: "‡∏Å‡πâ‡∏≤‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏à ‡∏ä‡∏±‡∏Å 2 (+2mm)", 
                desc: "üî• ‡∏™‡πÄ‡∏ï‡πá‡∏õ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô! ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏î ‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏õ‡∏∞‡πÄ‡∏Å‡πá‡∏ô‡∏´‡∏ô‡∏≤‡∏°‡∏≤‡∏Å (‡πÉ‡∏™‡πà‡∏õ‡∏∞‡πÄ‡∏Å‡πá‡∏ô 3-5 ‡∏°‡∏¥‡∏•‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)", 
                link: "https://s.shopee.co.th/9UuTgg1n2e" 
            },
            '3': { 
                title: "‡∏Å‡πâ‡∏≤‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏à ‡∏ä‡∏±‡∏Å 3 (+3mm)", 
                desc: "‚ö° ‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≠‡∏î‡∏Æ‡∏¥‡∏ï! ‡πÑ‡∏î‡πâ Torque (‡πÅ‡∏£‡∏á‡∏ö‡∏¥‡∏î) ‡∏´‡∏ô‡∏±‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ä‡∏±‡∏Å 2 ‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏î‡∏¥‡∏ô‡∏•‡∏∂‡∏Å ‡∏Ç‡∏µ‡πà‡∏™‡∏ô‡∏∏‡∏Å‡∏ï‡∏¥‡∏î‡∏°‡∏∑‡∏≠ (‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÇ‡∏ã‡πà‡∏£‡∏≤‡∏ß‡∏•‡∏¥‡πâ‡∏ô‡∏ï‡∏∂‡∏á‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢)", 
                link: "https://s.shopee.co.th/9UuTgg1n2e" 
            },
            '5': { 
                title: "‡∏Å‡πâ‡∏≤‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏à ‡∏ä‡∏±‡∏Å 5 (+5mm)", 
                desc: "üöÄ ‡∏™‡∏≤‡∏¢ OPEN ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö! ‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ CC ‡πÄ‡∏¢‡∏≠‡∏∞‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏á‡∏≤‡∏¢ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏õ‡∏∞‡πÄ‡∏Å‡πá‡∏ô‡∏ï‡∏∂‡∏Å + ‡∏ï‡πà‡∏≠‡πÇ‡∏ã‡πà‡∏£‡∏≤‡∏ß‡∏•‡∏¥‡πâ‡∏ô)", 
                link: "https://s.shopee.co.th/5VOKvG0pQ8/" 
            }
        };

        const clutchData = {
            'std': { title: "‡∏Ñ‡∏•‡∏±‡∏ó‡∏ä‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå", desc: "‡∏à‡∏±‡∏ö‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏• ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ä‡∏≤‡∏Å", link: "" },
            'carbon': { title: "‡∏Ñ‡∏•‡∏±‡∏ó‡∏ä‡πå‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô (Carbon)", desc: "‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏à‡∏±‡∏ö‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏° ‡∏•‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏•‡∏∑‡πà‡∏ô", link: "https://s.shopee.co.th/7V9PJY4GMD" }
        };

        function updateProductDisplay(elementId, data) {
            const container = document.getElementById(elementId); if (!data) return;
            const btnHtml = data.link ? `<a href="${data.link}" target="_blank" class="shopee-btn"><i class="fas fa-shopping-cart"></i> ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</a>` : '';
            container.innerHTML = `<div class="product-info-box"><div class="spec-text"><div class="spec-title">${data.title}</div><div class="spec-detail">${data.desc}</div></div>${btnHtml}</div>`;
        }
        
        function setCam(val, el) { document.getElementById('cam').value = val; updateUI(el, 'cam_display_area', camData[val]); }
        function setVariator(val, el) { document.getElementById('variator').value = val; updateUI(el, 'var_display_area', varData[val]); }
        function setInjector(val, el) { document.getElementById('inj').value = val; updateUI(el, 'inj_display_area', injData[val]); }
        function setCooling(val, el) { document.getElementById('cooling').value = val; updateUI(el, 'cool_display_area', coolingData[val]); }
        function setExhaust(val, el) { document.getElementById('ex_type').value = val; updateUI(el, 'ex_display_area', exhaustData[val]); }
        function setRod(val, el) { document.getElementById('rod').value = val; updateUI(el, 'rod_display_area', rodData[val]); }
        function setClutch(val, el) { document.getElementById('clutch').value = val; updateUI(el, 'clutch_display_area', clutchData[val]); }
        function setCoil(el) { 
            const val = el.value; 
            updateProductDisplay('coil_display_area', coilData[val]); 
            runDyno(false); 
        }

        function updateUI(el, areaId, data) {
            el.closest('.cam-grid').querySelectorAll('.cam-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            runDyno(false);
            updateProductDisplay(areaId, data);
        }

        function resetDefaults() {
            document.getElementById('piston').value = 60; document.getElementById('stroke').value = 55.5; document.getElementById('tb').value = 'std';
            document.getElementById('air').value = 'std'; document.getElementById('final_gear').value = 'std'; document.getElementById('spring').value = 'std';
            document.getElementById('ecu').value = 'std'; document.getElementById('coil').value = 'std'; document.getElementById('plug').value = 'std';
            updateProductDisplay('coil_display_area', coilData['std']);
            document.getElementById('ex_size').value = '25'; document.getElementById('weight').value = 'std'; document.getElementById('tire').value = 'stock';
            document.getElementById('rider_weight').value = 65; document.getElementById('style').value = 'balance';
            
            ['btn_cam_std', 'btn_var_std', 'btn_inj_std', 'btn_cool_std', 'btn_ex_std', 'btn_rod_0', 'btn_clutch_std'].forEach(id => document.getElementById(id).click());
            runDyno(true);
        }

        function applyPreset(type) {
            resetDefaults();
            setTimeout(() => {
                if (type === 'step1') { // ‡πÑ‡∏•‡πà‡∏Ç‡πâ‡∏≤‡∏á
                    document.getElementById('btn_var_step1').click();
                    document.getElementById('spring').value = '1200';
                    document.getElementById('btn_ex_mok').click();
                    document.getElementById('plug').value = 'iri8';
                    document.getElementById('btn_clutch_carbon').click();
                } else if (type === 'step2') { // ‡∏î‡∏±‡∏ô‡πÇ‡∏•
                    document.getElementById('btn_cam_touring').click();
                    document.getElementById('btn_var_step1').click();
                    document.getElementById('ecu').value = 'remap';
                    document.getElementById('btn_ex_mok').click();
                    document.getElementById('ex_size').value = '28';
                    document.getElementById('style').value = 'top';
                } else if (type === 'step3') { // ‡∏•‡∏π‡∏Å 60
                    document.getElementById('piston').value = 60;
                    document.getElementById('btn_cam_racing').click();
                    document.getElementById('btn_var_step2').click();
                    document.getElementById('btn_inj_forza').click();
                    document.getElementById('tb').value = 'ream';
                    document.getElementById('ecu').value = 'remap';
                    document.getElementById('btn_ex_dang').click();
                    document.getElementById('ex_size').value = '32';
                    document.getElementById('plug').value = 'iri9';
                    document.getElementById('btn_clutch_carbon').click();
                } else if (type === 'step4') { // Open
                    document.getElementById('piston').value = 63;
                    document.getElementById('btn_cam_racing').click();
                    document.getElementById('btn_var_step2').click();
                    document.getElementById('btn_inj_xmax').click();
                    document.getElementById('tb').value = 'cnc32';
                    document.getElementById('ecu').value = 'standalone';
                    document.getElementById('btn_ex_dang').click();
                    document.getElementById('ex_size').value = '35';
                    document.getElementById('btn_cool_elec').click();
                    document.getElementById('weight').value = 'drag';
                    document.getElementById('btn_rod_2').click();
                }
                runDyno(true);
            }, 100);
        }

        function runDyno(animate = true) {
            // 1. ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
            let p = parseFloat(document.getElementById('piston').value) || 60;
            let s_base = 55.5;
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö
            let rod_val = document.getElementById('rod').value;
            let rod_add = (rod_val === '2') ? 2 : (rod_val === '3') ? 3 : (rod_val === '5') ? 5 : 0;
            let total_s = s_base + rod_add;

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì CC
            let cc = (Math.PI * Math.pow(p/2, 2) * total_s) / 1000;
            document.getElementById('d_cc').innerText = cc.toFixed(0);

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì RPM
            let ecu = document.getElementById('ecu').value;
            let rpm_limit = 10500;
            if(ecu === 'remap') rpm_limit = 11500;
            if(ecu === 'standalone') rpm_limit = 12500;
            document.getElementById('d_rpm').innerText = (rpm_limit/1000).toFixed(1);

            // --- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏£‡∏á‡∏°‡πâ‡∏≤ (HP) ‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ---
            let base_hp = 15.8;
            let cam = document.getElementById('cam').value;
            let ex_type = document.getElementById('ex_type').value;
            let tb = document.getElementById('tb').value;
            let air = document.getElementById('air').value;
            let cooling = document.getElementById('cooling').value;
            let inj = document.getElementById('inj').value;

            if(cc > 157) base_hp += (cc - 157) * 0.18;
            if(cam === 'touring') base_hp += 1.2;
            if(cam === 'racing') base_hp += 2.5;
            if(ex_type !== 'std') base_hp += 0.8;
            if(ecu !== 'std') base_hp += 1.5;
            if(tb === 'ream' || tb === 'cnc32') base_hp += 0.5;
            if(air === 'vel' || air === 'ss') base_hp += 0.3;
            
            // Penalties (‡∏•‡∏î‡πÅ‡∏£‡∏á‡∏°‡πâ‡∏≤‡∏ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á)
            if(p >= 63 && cooling === 'std') base_hp -= 2.0; // ‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î
            if(cc > 165 && inj === 'std') base_hp -= 3.0; // ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ö‡∏≤‡∏á

            document.getElementById('d_hp').innerText = base_hp.toFixed(1);

            // --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì CVT & ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß (Logic ‡πÉ‡∏´‡∏°‡πà!) ---
            let base_speed = 118; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏£‡∏ñ‡πÄ‡∏î‡∏¥‡∏°
            
            // 1. ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ CVT
            let rider_w = parseFloat(document.getElementById('rider_weight').value) || 65;
            let r_a = parseFloat(document.getElementById('roller_a').value) || 19;
            let r_b = parseFloat(document.getElementById('roller_b').value) || 19;
            let avg_roller = (r_a + r_b) / 2;
            let gear = document.getElementById('final_gear').value;
            let variator = document.getElementById('variator').value;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÄ‡∏°‡πá‡∏î
            document.getElementById('roller_avg_display').innerText = `‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: ${avg_roller} ‡∏Å‡∏£‡∏±‡∏°`;

            // 2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Speed ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
            if(cc > 160) base_speed += (cc - 157) * 0.9;
            if(ecu !== 'std') base_speed += (rpm_limit - 10500) * 0.016;
            if(cam === 'racing') base_speed += 8;

            // 3. ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏à‡∏≤‡∏Å "‡πÄ‡∏°‡πá‡∏î" (Roller Logic)
            // PCX160 ‡πÄ‡∏°‡πá‡∏î‡πÄ‡∏î‡∏¥‡∏° ~19g. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏•‡πà‡πÄ‡∏ö‡∏≤‡∏•‡∏á (13-15g) ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ï‡πâ‡∏ô ‡πÅ‡∏ï‡πà‡∏õ‡∏•‡∏≤‡∏¢‡∏≠‡∏≤‡∏à‡∏ï‡∏∑‡πâ‡∏≠‡∏ñ‡πâ‡∏≤‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°
            if (avg_roller < 12) {
                base_speed -= 5; // ‡πÄ‡∏ö‡∏≤‡πÑ‡∏õ ‡∏õ‡∏•‡∏≤‡∏¢‡∏´‡∏≤‡∏¢
            } else if (avg_roller > 20) {
                base_speed += 2; // ‡∏´‡∏ô‡∏±‡∏Å‡πÑ‡∏õ ‡πÑ‡∏´‡∏•‡∏õ‡∏•‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏ä‡πâ‡∏≤
            }
            
            // 4. ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏à‡∏≤‡∏Å "‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏Ñ‡∏ô‡∏Ç‡∏µ‡πà"
            // ‡∏ó‡∏∏‡∏Å‡πÜ 10kg ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô 65kg ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏à‡∏∞‡∏•‡∏î‡∏•‡∏á
            if (rider_w > 65) {
                let overweight = rider_w - 65;
                base_speed -= (overweight * 0.15); 
            }

            // 5. ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏à‡∏≤‡∏Å "‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡∏ó‡πâ‡∏≤‡∏¢" (Gear Ratio Logic - Updated)
            // ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£: ‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢=‡∏ï‡πâ‡∏ô‡∏à‡∏±‡∏î/‡∏õ‡∏•‡∏≤‡∏¢‡∏´‡∏î, ‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡πÄ‡∏¢‡∏≠‡∏∞=‡∏ï‡πâ‡∏ô‡∏≠‡∏∑‡∏î/‡∏õ‡∏•‡∏≤‡∏¢‡πÑ‡∏´‡∏•(‡∏ñ‡πâ‡∏≤‡πÅ‡∏£‡∏á‡∏ñ‡∏∂‡∏á)
            
            if (gear === '13') {
                base_speed -= 15; // ‡∏ï‡πâ‡∏ô‡∏à‡∏±‡∏î‡∏°‡∏≤‡∏Å ‡πÅ‡∏ï‡πà‡∏õ‡∏•‡∏≤‡∏¢‡∏´‡∏≤‡∏¢‡πÄ‡∏¢‡∏≠‡∏∞
            } else if (gear === '14') {
                base_speed -= 10; // ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö Drag
            } else if (gear === '15') {
                base_speed -= 5;  // ‡∏Ç‡∏±‡∏ö‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏™‡∏ô‡∏∏‡∏Å
            }
            // *‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: std (16T) ‡πÑ‡∏°‡πà‡∏ö‡∏ß‡∏Å‡πÑ‡∏°‡πà‡∏•‡∏ö

            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (HP) ‡∏û‡∏≠‡∏à‡∏∞‡∏•‡∏≤‡∏Å‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡πÑ‡∏´‡∏ß‡πÑ‡∏´‡∏°?
            let required_hp_mid = 18; // ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ 18 HP ‡∏ñ‡∏∂‡∏á‡∏Ç‡∏±‡∏ö‡πÄ‡∏ü‡∏∑‡∏≠‡∏á 14 ‡πÑ‡∏´‡∏ß
            let required_hp_high = 22; // ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ 22 HP ‡∏ñ‡∏∂‡∏á‡∏Ç‡∏±‡∏ö‡πÄ‡∏ü‡∏∑‡∏≠‡∏á 15 ‡πÑ‡∏´‡∏ß

            if (gear === 'mid') {
                if (base_hp >= required_hp_mid) base_speed += 8; // ‡πÅ‡∏£‡∏á‡∏ñ‡∏∂‡∏á ‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏¢‡∏ö‡∏ß‡∏Å
                else base_speed -= 5; // ‡πÅ‡∏£‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á ‡∏£‡∏ñ‡∏´‡πâ‡∏≠‡∏¢
            }
            if (gear === 'high') {
                if (base_hp >= required_hp_high) base_speed += 15; // ‡πÅ‡∏£‡∏á‡∏ñ‡∏∂‡∏á ‡∏ö‡∏¥‡∏ô‡πÄ‡∏•‡∏¢
                else base_speed -= 10; // ‡πÅ‡∏£‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á ‡∏´‡πâ‡∏≠‡∏¢‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å
            }

            // ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ä‡∏≤‡∏°‡πÅ‡∏ï‡πà‡∏á
            if(variator === 'step1') base_speed += 5;
            if(variator === 'step2') base_speed += 8;

            // ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß
            let final_speed = Math.floor(base_speed);
            
            // Animation ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
            let display = document.getElementById('d_speed');
            if(animate) {
                let start = 0; let duration = 1000; let startTime = null;
                function animation(currentTime) {
                    if(!startTime) startTime = currentTime;
                    let progress = currentTime - startTime;
                    let val = Math.min(Math.floor((progress/duration)*final_speed), final_speed);
                    display.innerText = val;
                    if(progress < duration) requestAnimationFrame(animation); else display.innerText = final_speed;
                } requestAnimationFrame(animation);
            } else { 
                display.innerText = final_speed; 
            }

            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å AI Generate ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ CVT ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢)
            generateAdvice({
                p, cc, rpm: rpm_limit, cooling, clutch, inj, hp: base_hp,
                rider_w, avg_roller, gear
            });
        }

        function generateAdvice(data) {
            const logs = document.getElementById('logs'); 
            logs.innerHTML = "";
            
            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô + ‡∏õ‡∏∏‡πà‡∏° Shopee
            const addMsg = (type, title, desc, link = '') => {
                let cls = 'msg-info'; 
                if(type === 'danger') cls = 'msg-danger'; 
                if(type === 'warn') cls = 'msg-warn'; 
                if(type === 'good') cls = 'msg-success';
                
                // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏•‡∏¥‡∏á‡∏Å‡πå ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                const btnHtml = link ? `<a href="${link}" target="_blank" class="ai-shop-btn"><i class="fas fa-shopping-cart"></i> ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>` : '';
                
                logs.innerHTML += `<li class="ai-msg ${cls}"><strong>${title}</strong><span>${desc}</span>${btnHtml}</li>`;
            }

            // --- 1. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå CVT (‡∏™‡∏π‡∏ï‡∏£‡πÑ‡∏•‡πà‡πÄ‡∏°‡πá‡∏î vs ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏Ñ‡∏ô) ---
            if (data.rider_w > 90 && data.avg_roller > 16) {
                addMsg('warn', 'üê¢ ‡∏£‡∏ñ‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏∑‡∏î‡∏°‡∏≤‡∏Å!', 
                    `‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏ß ${data.rider_w}kg ‡πÅ‡∏ï‡πà‡πÉ‡∏™‡πà‡πÄ‡∏°‡πá‡∏î‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ ${data.avg_roller}g ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏ñ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏£‡∏á‡∏≠‡∏≠‡∏Å‡∏ï‡∏±‡∏ß <strong>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏°‡πá‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏™‡πà‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏ó‡∏≠‡∏£‡πå‡∏Ñ 1000 RPM ‡∏ä‡πà‡∏ß‡∏¢</strong>`,
                    'https://s.shopee.co.th/30gzzefPoF'); 
            }

            if (data.rider_w < 60 && data.avg_roller < 11) {
                addMsg('info', '‚öôÔ∏è ‡∏£‡∏≠‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ', 
                    `‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏ö‡∏≤ ‡πÉ‡∏™‡πà‡πÄ‡∏°‡πá‡∏î‡πÄ‡∏ö‡∏≤‡∏°‡∏≤‡∏Å (${data.avg_roller}g) ‡∏£‡∏ñ‡∏à‡∏∞‡∏£‡∏≠‡∏ö‡∏à‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏õ‡∏•‡∏≤‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏î‡∏¥‡∏ô <strong>‡∏•‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡πá‡∏î‡πÄ‡∏õ‡πá‡∏ô 11-13g</strong> ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô`,
                    'https://s.shopee.co.th/6KxRxvGQZn'); 
            }

            // --- 2. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡∏ó‡πâ‡∏≤‡∏¢ vs ‡πÅ‡∏£‡∏á‡∏°‡πâ‡∏≤ ---
            if (data.gear === 'high' && data.hp < 20) {
                addMsg('danger', 'üõë ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏£‡∏ñ‡∏´‡πâ‡∏≠‡∏¢! (Gear Ratio)', 
                    `‡πÉ‡∏™‡πà‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡∏ó‡πâ‡∏≤‡∏¢ 15 ‡πÅ‡∏ï‡πà‡πÅ‡∏£‡∏á‡∏°‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏Ñ‡πà ${data.hp.toFixed(1)} HP (‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ 22HP+) <strong>‡∏£‡∏ñ‡∏à‡∏∞‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å ‡∏õ‡∏•‡∏≤‡∏¢‡∏´‡∏î</strong> ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ü‡∏∑‡∏≠‡∏á 14 ‡∏û‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö`,
                    'https://s.shopee.co.th/1BFLoXtCOf');
            }

            if (data.gear === 'std' && data.hp > 25) {
                addMsg('good', 'üöÄ ‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡πÑ‡∏î‡πâ (Speed Unlock)', 
                    `‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏£‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡∏µ‡πâ (${data.hp.toFixed(1)} HP) ‡πÄ‡∏ü‡∏∑‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏≠‡∏≤‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß! <strong>‡∏à‡∏±‡∏î‡πÄ‡∏ü‡∏∑‡∏≠‡∏á 15T ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</strong> ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏õ‡∏•‡∏≤‡∏¢‡πÑ‡∏´‡∏•‡πÅ‡∏ï‡∏∞ 160+ ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô`,
                    'https://s.shopee.co.th/1BFLoXtCOf');
            }

            // --- 3. ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ---
            // ‡∏Å‡∏£‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
            if (document.getElementById('air').value === 'std') {
                addMsg('info', 'üå™Ô∏è ‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®', 
                    '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏£‡πà‡∏á‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏î‡πâ‡∏ß‡∏¢ <strong>‡∏Å‡∏£‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡πÅ‡∏ï‡∏ô‡πÄ‡∏•‡∏™ (Hurricane)</strong> ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ', 
                    'https://s.shopee.co.th/6faIMABBJp');
            }

            // ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ö‡∏£‡∏Å (‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô 140)
            if (parseInt(document.getElementById('d_speed').innerText) > 140) {
                addMsg('danger', 'üõë ‡πÄ‡∏ö‡∏£‡∏Ñ‡πÄ‡∏≠‡∏≤‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà! (Brake Upgrade)', 
                    '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß 140+ ‡πÄ‡∏ö‡∏£‡∏Ñ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏ü‡∏î‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏°‡∏≤‡∏Å! <strong>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ú‡πâ‡∏≤‡πÄ‡∏ö‡∏£‡∏Ñ‡∏ã‡∏¥‡πà‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡∏õ‡∏±‡πä‡∏°‡πÄ‡∏ö‡∏£‡∏Å</strong>', 
                    'https://s.shopee.co.th/3fwgnMIZsn');
            }

            // ‡∏ä‡πà‡∏ß‡∏á‡∏•‡πà‡∏≤‡∏á (‡∏ñ‡πâ‡∏≤‡πÅ‡∏£‡∏á‡∏°‡πâ‡∏≤‡πÄ‡∏¢‡∏≠‡∏∞)
            if (data.hp > 22 || data.rpm > 11000) {
                addMsg('warn', '„Ä∞Ô∏è ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏£‡∏ñ‡∏£‡πà‡∏≠‡∏ô (Suspension)', 
                    '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏£‡∏á‡πÅ‡∏ï‡πà‡∏ä‡πà‡∏ß‡∏á‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏° "‡πÄ‡∏≠‡∏≤‡πÑ‡∏°‡πà‡∏•‡∏á" ‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏Ñ‡πâ‡∏á‡∏¢‡πâ‡∏ß‡∏¢‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô <strong>‡∏Ñ‡∏ß‡∏£‡∏à‡∏±‡∏î‡πÇ‡∏ä‡πä‡∏Ñ‡πÅ‡∏Å‡πä‡∏™‡πÅ‡∏ó‡πâ (profender/Ohlins) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡πà‡∏á</strong>', 
                    'https://s.shopee.co.th/2LRJD2kTcT');
            }


            let riderW = parseFloat(document.getElementById('rider_weight').value) || 65;
            if (riderW >= 85 && document.getElementById('spring').value === 'std') {
                addMsg('info', '‚öñÔ∏è ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏¢‡∏≠‡∏∞ (Heavy Rider)', 
                    '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å 85kg+ ‡∏£‡∏ñ‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏∑‡∏î <strong>‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏ó‡∏≠‡∏£‡πå‡∏Ñ 1000 RPM + ‡πÑ‡∏•‡πà‡πÄ‡∏°‡πá‡∏î‡πÄ‡∏ö‡∏≤‡∏•‡∏á 1-2 ‡∏Å‡∏£‡∏±‡∏°</strong>', 
                    'https://s.shopee.co.th/1LYm1N27NS');
            }

            // ‡∏´‡∏°‡πâ‡∏≠‡∏ô‡πâ‡∏≥ (‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡πÇ‡∏ï‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
            if (data.p >= 63 && data.cooling === 'std') {
                addMsg('danger', 'üî• ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏ô‡πâ‡∏≥‡∏î‡∏±‡∏ô!', 
                    '‡∏•‡∏π‡∏Å‡πÇ‡∏ï‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏°‡πâ‡∏≠‡∏ô‡πâ‡∏≥‡πÉ‡∏ö‡∏¢‡∏≤‡∏ß‡∏î‡πà‡∏ß‡∏ô! ‡πÑ‡∏°‡πà‡∏á‡∏±‡πâ‡∏ô‡∏ù‡∏≤‡∏™‡∏π‡∏ö‡πÇ‡∏Å‡πà‡∏á‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô', 
                    'https://s.shopee.co.th/5q1BNgs1ae');
            }
            
            if (data.rpm > 11000) {
                addMsg('info', 'üõ¢Ô∏è ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å! (High Grade Oil)', 
                    '‡∏£‡∏ñ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡∏£‡∏≠‡∏ö‡∏à‡∏±‡∏î! ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ <strong>‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå 100% (Fully Synthetic)</strong> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏¥‡∏•‡πå‡∏°‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß ‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏™‡∏π‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ã‡∏±‡∏î‡∏¢‡∏≤‡∏ß‡πÜ', 
                    'https://s.shopee.co.th/3VdGbXosux');
            }

            // ‡∏Ñ‡∏≠‡∏ó‡πà‡∏≠ (‡∏ñ‡πâ‡∏≤‡πÅ‡∏£‡∏á‡∏°‡πâ‡∏≤‡πÄ‡∏¢‡∏≠‡∏∞‡πÅ‡∏ï‡πà‡∏ó‡πà‡∏≠‡πÄ‡∏•‡πá‡∏Å)
            if (data.hp > 22 && document.getElementById('ex_size').value === '25') {
                addMsg('warn', 'üí® ‡∏ó‡πà‡∏≠‡∏≠‡∏±‡πâ‡∏ô!', 
                    '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏£‡∏á‡πÅ‡∏ï‡πà‡∏ó‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏° ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏™‡∏∞‡∏™‡∏° <strong>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≠‡∏ó‡πà‡∏≠ 28mm-32mm ‡∏î‡πà‡∏ß‡∏ô</strong>',
                    'https://s.shopee.co.th/Vzf25cpRC'); 
            }

            if (data.p >= 60 && document.getElementById('tb').value === 'std') {
                addMsg('warn', 'üí® ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏≠‡∏±‡πâ‡∏ô! (Intake Restricted)', 
                    `‡∏•‡∏π‡∏Å ${data.p}mm ‡πÉ‡∏ä‡πâ‡∏•‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å! <strong>‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏¥‡πâ‡∏ô 32mm ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏™‡πà‡∏•‡∏¥‡πâ‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á CNC</strong>`, 
                    'https://s.shopee.co.th/9UuTkm5KZI');
            }
            
            if (data.cc > 165 && data.inj === 'std') {
                 addMsg('danger', '‚õî ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢: ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ö‡∏≤‡∏á!', '‡∏•‡∏π‡∏Å‡πÇ‡∏ï‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î‡πÄ‡∏î‡∏¥‡∏° = ‡∏û‡∏±‡∏á‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô! ‡∏™‡∏±‡πà‡∏á‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î Forza/XMAX ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ô‡∏µ‡πâ', 'https://shopee.co.th/search?keyword=injector+forza350');
            }

            // ‡πÄ‡∏û‡∏¥‡πà‡∏° Logic ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 210cc
            if (data.p >= 59 && data.p <= 60 && data.inj !== '210' && data.inj !== 'forza') {
                addMsg('info', 'üí° ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 210cc (8W)', 
                    `‡∏•‡∏π‡∏Å ${data.p}mm ‡πÉ‡∏ä‡πâ‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 210cc ‡∏à‡∏∞‡∏à‡∏π‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏£‡∏±‡∏ö! ‡πÑ‡∏°‡πà‡∏ö‡∏≤‡∏á‡πÑ‡∏õ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô 160 ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ó‡πà‡∏ß‡∏°‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Forza`,
                    'https://s.shopee.co.th/9Kb3UywQLN');
            }

            if (data.p === 60 && document.getElementById('variator').value !== 'std' && document.getElementById('ecu').value === 'std') {
                addMsg('good', 'üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°', 
                    '‡∏™‡πÄ‡∏ï‡πá‡∏õ‡∏ô‡∏µ‡πâ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ <strong>‡∏£‡∏µ‡πÅ‡∏°‡∏û (Remap)</strong> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î ‡∏à‡∏∞‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏õ‡∏•‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å 10-15 km/h ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö');
            }
        }

        runDyno(false);

        // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (Requires html2canvas) ---
        function captureImage(btn) {
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û...';
            btn.style.opacity = '0.7';
            btn.disabled = true;

            // 1. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô "‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î"‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà
            document.getElementById('card_piston').innerText = document.getElementById('piston').value;
            
            // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PCX ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏•‡πà‡πÄ‡∏°‡πá‡∏î‡πÅ‡∏ó‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå
            const ra = document.getElementById('roller_a').value;
            const rb = document.getElementById('roller_b').value;
            document.getElementById('card_roller').innerText = ra + 'g / ' + rb + 'g';
            
            const camVal = document.getElementById('cam').value;
            document.getElementById('card_cam').innerText = camData[camVal] ? camData[camVal].title : '‡πÅ‡∏Ñ‡∏°‡πÄ‡∏î‡∏¥‡∏°';

            document.getElementById('card_speed').innerText = document.getElementById('d_speed').innerText;
            document.getElementById('card_hp').innerText = document.getElementById('d_hp').innerText;

            // 2. ‡πÉ‡∏ä‡πâ html2canvas ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö‡∏ô‡∏±‡πâ‡∏ô
            const cardElement = document.getElementById('share-card');
            
            html2canvas(cardElement, {
                scale: 2, // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏°‡∏ä‡∏±‡∏î 2 ‡πÄ‡∏ó‡πà‡∏≤
                backgroundColor: '#111111', // ‡πÉ‡∏™‡πà‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
                useCORS: true,
                logging: true // ‡πÄ‡∏õ‡∏¥‡∏î Log ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏õ‡∏±‡∏ç‡∏´‡∏≤
            }).then(canvas => {
                // 3. ‡πÅ‡∏õ‡∏•‡∏á canvas ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
                const imageURL = canvas.toDataURL("image/png");
                const link = document.createElement('a');
                link.href = imageURL;
                link.download = 'KIMX-PCX160-RESULT.png'; // ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ
                
                // 4. ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                // 5. ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°
                btn.innerHTML = '<i class="fas fa-check-circle"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.opacity = '1';
                    btn.disabled = false;
                }, 2000);
            }).catch(err => {
                console.error("Error capturing image:", err);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + err.message); 
                btn.innerHTML = originalText;
                btn.style.opacity = '1';
                btn.disabled = false;
            });
        }
    </script>
</body>
</html>