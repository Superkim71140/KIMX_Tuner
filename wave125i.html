<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wave 125i LED 2023-2025 (Final Edition)</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --bg: #050505; --card-bg: #111; --primary: #FFD700; --accent: #ff0000; --text: #ffffff; --border: #333; }
        body {
            font-family: 'Kanit', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding: 20px;
            background-image: linear-gradient(rgba(0,0,0,0.90), rgba(0,0,0,0.90)), url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
        }
        .container { max-width: 850px; margin: 0 auto; padding-bottom: 40px; margin-top: 60px; }
        
        /* NAV & HEADER */
        .top-nav {
            position: fixed; top: 15px; left: 50%; transform: translateX(-50%); z-index: 10000;
            display: flex; gap: 10px; background: rgba(0,0,0,0.9);
            padding: 8px 15px; border-radius: 50px; border: 1px solid #444;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5); backdrop-filter: blur(5px);
        }
        .nav-item {
            text-decoration: none; color: #888; padding: 8px 15px; border-radius: 25px; 
            font-weight: bold; font-size: 0.9rem; transition: 0.3s; display: flex; align-items: center; gap: 5px;
        }
        .nav-item:hover { color: #fff; background: rgba(255,255,255,0.1); }
        .nav-item.active { background: var(--primary); color: #000; box-shadow: 0 0 15px var(--primary); }

        .header-box { text-align: center; margin-bottom: 30px; border: 2px solid var(--primary); padding: 25px; border-radius: 20px; background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, rgba(0,0,0,1) 100%); box-shadow: 0 0 30px rgba(255, 215, 0, 0.15); position: relative; overflow: hidden; }
        h1 { margin: 0; font-style: italic; text-transform: uppercase; font-size: 2.2rem; line-height: 1.2; text-shadow: 2px 2px 0px #000; }
        .kimx-text { color: var(--primary); font-weight: 900; text-shadow: 0 0 15px var(--primary); }

        /* ONE-CLICK RECIPES */
        .preset-section { margin-bottom: 25px; text-align: center; }
        .preset-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; margin-top: 10px; }
        .preset-btn { 
            background: #222; border: 1px solid #444; color: #fff; padding: 15px 10px; 
            border-radius: 12px; cursor: pointer; transition: 0.2s; font-size: 0.9rem; 
            display: flex; flex-direction: column; align-items: center; gap: 8px; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .preset-btn i { font-size: 1.5rem; color: var(--primary); }
        .preset-btn span { font-weight: bold; line-height: 1.3; }
        .preset-btn:hover { 
            background: #333; transform: translateY(-3px); 
            border-color: var(--primary); box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2); 
        }

        /* DASHBOARD GRID SYSTEM */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card { 
            background: var(--card-bg); border: 1px solid var(--border); 
            border-radius: 15px; padding: 20px; text-align: center; position: relative; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        
        /* Speed Card */
        .card-speed {
            border: 2px solid #00ccff;
            background: linear-gradient(180deg, rgba(0, 204, 255, 0.05) 0%, #000 100%);
            box-shadow: 0 0 20px rgba(0, 204, 255, 0.1);
        }
        .val-speed { font-size: 4rem; font-weight: 900; color: #00ccff; text-shadow: 0 0 20px rgba(0, 204, 255, 0.4); line-height: 0.9; }
        
        /* HP Card */
        .card-hp {
            border: 2px solid var(--primary);
            background: linear-gradient(180deg, rgba(255, 215, 0, 0.05) 0%, #000 100%);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.1);
        }
        .val-hp { font-size: 4rem; font-weight: 900; color: var(--primary); text-shadow: 0 0 20px rgba(255, 215, 0, 0.4); line-height: 0.9; }

        .stat-label { font-size: 0.8rem; color: #888; letter-spacing: 1px; margin-top: 10px; text-transform: uppercase; font-weight: 600; }
        .val-sub { font-size: 2rem; font-weight: 800; color: #fff; }

        .control-section { background: var(--card-bg); padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid var(--border); transition: 0.3s; }
        .control-section:hover { border-left-color: var(--primary); box-shadow: -5px 0 15px rgba(255, 215, 0, 0.1); }
        .section-header { font-size: 1.1rem; color: #fff; margin-bottom: 15px; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        .section-header i { color: var(--primary); }
        
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        label { display: block; margin-bottom: 6px; font-size: 0.85rem; color: #aaa; }
        input, select { width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: #fff; border-radius: 8px; font-family: 'Kanit'; font-size: 1rem; transition: 0.2s; box-sizing: border-box; }
        input:focus, select:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 10px rgba(255, 215, 0, 0.2); }
        
        .cam-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 8px; }
        .cam-btn { background: #222; border: 1px solid #444; color: #aaa; padding: 12px; text-align: center; border-radius: 8px; cursor: pointer; font-size: 0.9rem; transition: 0.2s; }
        .cam-btn:hover { background: #333; }
        .cam-btn.active { background: var(--primary); color: #000; font-weight: bold; border-color: var(--primary); box-shadow: 0 0 15px var(--primary); transform: scale(1.05); }

        .btn-group { display: flex; gap: 10px; margin-bottom: 30px; }
        .run-btn { flex: 3; padding: 15px; background: linear-gradient(45deg, #ff0000, #990000); color: white; font-size: 1.5rem; font-weight: bold; border: none; border-radius: 10px; cursor: pointer; text-transform: uppercase; font-style: italic; box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3); transition: 0.3s; }
        .run-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(255, 0, 0, 0.5); }
        .reset-btn { flex: 1; background: #333; color: #aaa; border: 1px solid #555; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.2s; }
        .reset-btn:hover { background: #444; color: #fff; border-color: #fff; }

        .product-info-box {
            margin-top: 15px; padding: 15px;
            background: linear-gradient(90deg, #1a1a1a 0%, #111 100%);
            border: 1px solid #333; border-left: 4px solid var(--primary); border-radius: 8px;
            display: flex; justify-content: space-between; align-items: center; gap: 15px;
            animation: fadeIn 0.3s ease-in-out;
        }
        .spec-text { flex-grow: 1; }
        .spec-title { color: var(--primary); font-weight: bold; font-size: 1.1rem; margin-bottom: 4px; text-transform: uppercase; }
        .spec-detail { color: #aaa; font-size: 0.85rem; line-height: 1.4; }
        .shopee-btn {
            background: #ee4d2d; color: #fff; border: none; padding: 10px 20px; border-radius: 5px; font-weight: 600;
            text-decoration: none; display: flex; align-items: center; gap: 8px; font-size: 0.9rem; white-space: nowrap; transition: 0.2s; box-shadow: 0 4px 10px rgba(238, 77, 45, 0.3);
        }
        .shopee-btn:hover { background: #ff6644; transform: translateY(-2px); box-shadow: 0 6px 15px rgba(238, 77, 45, 0.5); }

        .ai-log { margin-top: 30px; padding: 20px; background: #0a0a0a; border: 1px solid #333; border-radius: 12px; box-shadow: inset 0 0 20px rgba(0,0,0,0.8); position: relative; overflow: hidden; }
        .ai-log::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, var(--primary), transparent); animation: scan 2s infinite; }
        @keyframes scan { 0% {transform: translateX(-100%);} 100% {transform: translateX(100%);} }
        .ai-header { font-family: 'Courier New', monospace; color: var(--primary); font-weight: bold; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .log-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 10px; }
        .ai-msg { padding: 12px 15px; background: #151515; border-left: 4px solid #555; border-radius: 4px; font-size: 0.85rem; color: #ccc; display: flex; flex-direction: column; animation: slideIn 0.3s ease-out; }
        .ai-msg strong { display: block; margin-bottom: 3px; font-size: 0.9rem; }
        .msg-danger { border-left-color: #ff3333; background: rgba(255, 51, 51, 0.05); color: #ffaaaa; }
        .msg-warn { border-left-color: #ffaa00; background: rgba(255, 170, 0, 0.05); color: #ffeebb; }
        .msg-info { border-left-color: #00ccff; background: rgba(0, 204, 255, 0.05); color: #bbeeff; }
        .msg-success { border-left-color: #00ff66; background: rgba(0, 255, 102, 0.05); color: #bbffdd; }
        .ai-shop-btn { display: inline-block; margin-top: 8px; background: #ee4d2d; color: white; font-size: 0.8rem; padding: 5px 12px; border-radius: 4px; text-decoration: none; font-weight: bold; transition: 0.2s; width: fit-content; }
        .ai-shop-btn:hover { background: #ff6644; transform: translateX(3px); }
        .ai-shop-btn i { margin-right: 5px; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

        #kimx-loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 99999; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 0.6s ease; }
        .spinner-box { position: relative; width: 80px; height: 80px; display: flex; justify-content: center; align-items: center; }
        .spinner { width: 100%; height: 100%; border: 4px solid rgba(255, 215, 0, 0.2); border-top: 4px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
        .spinner-logo { position: absolute; font-size: 1.5rem; color: #fff; font-weight: bold; font-style: italic; }
        .loader-text { margin-top: 20px; font-family: 'Kanit', sans-serif; color: #888; letter-spacing: 3px; font-size: 0.9rem; animation: blink 1.5s infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } @keyframes blink { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } } .loaded { opacity: 0; pointer-events: none; }

        /* Partner Section */
        .partner-section {
            margin-top: 35px; padding: 20px; background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            border: 1px dashed var(--primary); border-radius: 12px; text-align: center; position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .partner-badge {
            position: absolute; top: -16px; left: 50%; transform: translateX(-50%);
            background: linear-gradient(45deg, #FFD700, #FFC107); color: #000; font-weight: 800; font-size: 0.9rem; 
            padding: 6px 20px; border-radius: 25px; border: 3px solid #111; box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            white-space: nowrap; z-index: 10; animation: goldPulse 2s infinite ease-in-out;
        }
        .partner-content { display: flex; flex-direction: column; gap: 8px; margin-top: 30px; }
        @keyframes goldPulse {
            0% { transform: translateX(-50%) scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7); }
            50% { transform: translateX(-50%) scale(1.1); box-shadow: 0 0 0 15px rgba(255, 215, 0, 0); }
            100% { transform: translateX(-50%) scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }
        .partner-title { font-size: 1.1rem; color: #fff; font-weight: bold; }
        .partner-desc { color: #ccc; font-size: 0.85rem; line-height: 1.4; }
        .fb-btn {
            margin-top: 5px; background: linear-gradient(to right, #0064e0, #1877F2); color: #fff; padding: 8px 20px;
            border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 0.9rem; display: inline-flex;
            align-items: center; justify-content: center; gap: 8px; transition: 0.2s; border: 1px solid rgba(255,255,255,0.2);
        }
        .fb-btn:hover { background: #2D8EFF; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(24, 119, 242, 0.4); }

        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 20000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal-content { background: #111; border: 2px solid var(--primary); padding: 30px; border-radius: 20px; text-align: center; width: 300px; position: relative; animation: zoomIn 0.3s; box-shadow: 0 0 30px rgba(255,215,0,0.3); }
        .close-modal { position: absolute; top: 10px; right: 15px; color: #888; cursor: pointer; font-size: 1.5rem; }
        @keyframes zoomIn { from {transform: scale(0.8); opacity: 0;} to {transform: scale(1); opacity: 1;} }

        /* ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏£‡πå‡∏™‡∏π‡∏ï‡∏£ */
        .share-btn {
            width: 100%; margin-top: 15px; margin-bottom: 25px; padding: 15px;
            background: linear-gradient(45deg, #00eaff, #0088ff); /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤ PCX ‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏ï‡∏±‡∏î‡∏Å‡∏±‡∏ô */
            color: #fff; font-weight: 900; font-size: 1.1rem;
            border: none; border-radius: 12px; cursor: pointer;
            box-shadow: 0 0 15px rgba(0, 234, 255, 0.3);
            transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .share-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 25px rgba(0, 234, 255, 0.6);
            filter: brightness(1.1);
        }
        .share-btn:active { transform: scale(0.95); }

        /* --- ‡πÄ‡∏û‡∏¥‡πà‡∏°: CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏ä‡∏£‡πå (‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà) --- */
        .share-card-box {
            width: 600px; padding: 40px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            border: 3px solid var(--primary); border-radius: 25px;
            text-align: center; font-family: 'Kanit', sans-serif; color: #fff;
            box-shadow: 0 0 50px rgba(0,0,0,0.8); position: relative; overflow: hidden;
        }
        .share-card-box::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
            opacity: 0.2; z-index: 0;
        }
        .card-header, .card-specs-grid, .card-results, .card-footer { position: relative; z-index: 1; }
        .card-logo { height: 60px; margin-bottom: 10px; filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5)); }
        .card-title { color: var(--primary); font-size: 2.5rem; margin: 0 0 30px 0; text-transform: uppercase; font-weight: 900; }

        .card-specs-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; text-align: left;
            background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; border: 1px solid rgba(255, 215, 0, 0.2);
        }
        .spec-item { font-size: 1.3rem; color: #ddd; }
        .spec-item i { color: var(--primary); margin-right: 10px; width: 25px; text-align: center;}
        .spec-item span { font-weight: 800; color: #fff; margin-left: 5px; }

        .card-results { display: flex; gap: 20px; margin-bottom: 30px; }
        .result-box-card { flex: 1; padding: 25px 10px; border-radius: 15px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.1); }
        .result-box-card.speed { border-color: var(--primary); background: linear-gradient(to bottom, rgba(255,215,0,0.1), rgba(0,0,0,0.2)); }
        .result-box-card.hp { border-color: #ff3333; background: linear-gradient(to bottom, rgba(255,51,51,0.1), rgba(0,0,0,0.2)); }
        .result-box-card .lbl { font-size: 1.1rem; color: #aaa; margin-bottom: 10px; }
        .result-box-card .val { font-size: 3.5rem; font-weight: 900; line-height: 1; text-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .result-box-card.speed .val { color: var(--primary); }
        .result-box-card.hp .val { color: #ff3333; }
        .card-footer { font-size: 1.1rem; color: #888; letter-spacing: 1px; }

        @media screen and (max-width: 600px) {
            body { padding: 10px; }
            .container { margin-top: 70px; padding-bottom: 20px; }
            h1 { font-size: 1.5rem; margin-top: 5px; }
            .header-box { padding: 15px; margin-bottom: 15px; }
            .dashboard-grid { grid-template-columns: 1fr 1fr; gap: 8px; }
            .val-speed, .val-hp { font-size: 2.8rem !important; }
            .val-sub { font-size: 1.8rem; }
            .stat-card { padding: 15px 10px; }
            .preset-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
            .preset-btn { padding: 10px; font-size: 0.75rem; }
            .control-section { padding: 15px; margin-bottom: 15px; }
            .grid-2 { grid-template-columns: 1fr; gap: 10px; }
            input, select { padding: 10px; font-size: 0.9rem; }
            .cam-grid { grid-template-columns: repeat(3, 1fr); gap: 5px; }
            .cam-btn { padding: 8px 2px; font-size: 0.75rem; }
            .btn-group { flex-direction: column; gap: 10px; }
            .run-btn { font-size: 1.2rem; padding: 12px; }
            .partner-section { padding: 15px 10px; margin-top: 20px; }
            .partner-title { font-size: 1rem; }
            .partner-desc { font-size: 0.8rem; }
            .fb-btn { width: 100%; box-sizing: border-box; }
        }
    </style>
</head>
<body>

    <div id="kimx-loader">
        <div class="spinner-box"><div class="spinner"></div><div class="spinner-logo">KIMX</div></div>
        <div class="loader-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
    </div>
    
    <div class="top-nav">
        <a href="index.html" class="nav-item"><i class="fas fa-home"></i> HOME</a>
        <a href="wave125i.html" class="nav-item active"><i class="fas fa-motorcycle"></i> 125i</a>
        <a href="wave110i.html" class="nav-item"><i class="fas fa-motorcycle"></i> 110i</a>
        <a href="pcx160.html" class="nav-item"><i class="fas fa-space-shuttle"></i> PCX160</a>
    </div>

    <div class="container">
        <div class="header-box">
            <h1>WAVE 125i LED <span class="kimx-text">2023-2025</span></h1>
            <div style="font-size: 0.9rem; color: #888; margin-top: 5px; letter-spacing: 2px;">V.FINAL INTELLIGENT SYSTEM</div>
        </div>

        <div class="preset-section">
            <div style="color:var(--primary); font-weight:bold; letter-spacing:1px; margin-bottom:5px;">
                <i class="fas fa-magic"></i> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (ONE-CLICK RECIPES)
            </div>
            <div class="preset-grid">
                <div class="preset-btn" onclick="applyPreset('step1')">
                    <i class="fas fa-motorcycle"></i> <span>‡∏™‡πÄ‡∏ï‡πá‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô<br>(‡∏•‡∏π‡∏Å 53)</span>
                </div>
                <div class="preset-btn" onclick="applyPreset('step2')">
                    <i class="fas fa-road"></i> <span>‡∏î‡∏±‡∏ô‡πÇ‡∏•<br>(‡∏•‡∏π‡∏Å 54-55)</span>
                </div>
                <div class="preset-btn" onclick="applyPreset('step3')">
                    <i class="fas fa-bolt"></i> <span>‡∏ï‡∏±‡∏ß‡∏Ç‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô<br>(‡∏•‡∏π‡∏Å 57)</span>
                </div>
                <div class="preset-btn" onclick="applyPreset('step4')">
                    <i class="fas fa-rocket"></i> <span>Open<br>(‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö)</span>
                </div>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <div class="stat-card card-speed">
                <div class="val-speed" id="disp_speed">0</div>
                <div class="stat-label">GPS TOP SPEED (KM/H)</div>
            </div>
            
            <div class="stat-card card-hp">
                <div class="val-hp" id="disp_hp">0.0</div>
                <div class="stat-label">EST. HORSEPOWER (HP)</div>
            </div>

            <div class="stat-card">
                <div class="val-sub" id="disp_rpm" style="color: #ff3333;">0.0</div>
                <div class="stat-label">RPM LIMIT (x1000)</div>
            </div>
            <div class="stat-card">
                <div class="val-sub" id="disp_cc" style="color: #fff;">124</div>
                <div class="stat-label">ENGINE CC</div>
            </div>
        </div>
        
        <div class="btn-group">
            <button class="run-btn" onclick="runDyno()"><i class="fas fa-tachometer-alt"></i> TEST DYNO RUN</button>
            <button class="reset-btn" onclick="resetDefaults()"><i class="fas fa-undo"></i> ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</button>
        </div>

        <button class="share-btn" onclick="captureImage(this)">
            <i class="fas fa-camera"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
        </button>
        
        <form id="tunerForm" onchange="runDyno(false)"> 
            
            <div class="control-section">
                <div class="section-header"><i class="fas fa-cogs"></i> ‡∏™‡πÄ‡∏õ‡∏Ñ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏ô‡∏ï‡πå & ‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö</div>
                <div class="grid-2" style="margin-bottom: 20px;">
                    <div><label>‡∏•‡∏π‡∏Å‡∏™‡∏π‡∏ö (mm)</label><input type="number" id="piston" value="53" placeholder="50-66"></div>
                    <div><label>‡∏ä‡πà‡∏ß‡∏á‡∏ä‡∏±‡∏Å‡πÄ‡∏î‡∏¥‡∏° (mm)</label><input type="number" id="stroke" value="63.1" placeholder="‡πÄ‡∏î‡∏¥‡∏° 63.1"></div>
                    <div style="grid-column: span 2;"><label>‡∏Ç‡∏ô‡∏≤‡∏î‡∏ß‡∏≤‡∏•‡πå‡∏ß (Valve)</label><select id="valve_size"><option value="std">‡∏ß‡∏≤‡∏•‡πå‡∏ß‡πÄ‡∏î‡∏¥‡∏°</option><option value="formula">‡∏ß‡∏≤‡∏•‡πå‡∏ß‡πÅ‡∏ï‡πà‡∏á (‡∏ï‡∏≤‡∏°‡∏™‡∏π‡∏ï‡∏£‡∏•‡∏π‡∏Å)</option><option value="24/28">24 / 28</option><option value="27/31">27 / 31</option><option value="30/34">30 / 34</option></select></div>
                </div>
                <div style="border-top: 1px solid #333; padding-top: 15px;">
                    <div class="section-header" style="justify-content: space-between; font-size: 0.95rem; margin-bottom: 10px;">
                        <span style="color:var(--primary);"><i class="fas fa-hammer"></i> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö (Connecting Rod)</span>
                        <span style="font-size:0.8rem; color:#666;">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡πÄ‡∏õ‡∏Ñ</span>
                    </div>
                    <div class="cam-grid">
                        <div class="cam-btn active" id="btn_rod_std" onclick="setRod('std', this)">‡πÄ‡∏î‡∏¥‡∏°</div>
                        <div class="cam-btn" id="btn_rod_mono" onclick="setRod('mono', this)">Mono</div>
                        <div class="cam-btn" id="btn_rod_forged" onclick="setRod('forged', this)">Forged</div>
                        <div class="cam-btn" id="btn_rod_c3" onclick="setRod('c3', this)">‡∏ä‡∏±‡∏Å 3</div>
                        <div class="cam-btn" id="btn_rod_c5" onclick="setRod('c5', this)">‡∏ä‡∏±‡∏Å 5</div>
                    </div>
                    <input type="hidden" id="rod" value="std">
                    <div id="rod_display_area"></div>
                </div>
            </div>
            
            <div class="control-section">
                <div class="section-header" style="justify-content: space-between;">
                    <span><i class="fas fa-wave-square"></i> ‡πÅ‡∏Ñ‡∏°‡∏ä‡∏≤‡∏£‡πå‡∏ü (Camshaft)</span>
                    <span style="font-size:0.8rem; color:#666;">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡πÄ‡∏õ‡∏Ñ</span>
                </div>
                <div class="cam-grid">
                    <div class="cam-btn active" id="btn_cam_std" onclick="setCam('std', this)">‡πÄ‡∏î‡∏¥‡∏°</div>
                    <div class="cam-btn" id="btn_cam_n1" onclick="setCam('n1', this)">N1</div>
                    <div class="cam-btn" id="btn_cam_n2" onclick="setCam('n2', this)">N2</div>
                    <div class="cam-btn" id="btn_cam_n3" onclick="setCam('n3', this)">N3</div>
                    <div class="cam-btn" id="btn_cam_open" onclick="setCam('open', this)">OPEN</div>
                </div>
                <input type="hidden" id="cam" value="std">
                <div id="cam_display_area"></div>
            </div>
            
            <div class="control-section">
                <div class="section-header" style="justify-content: space-between;">
                    <span><i class="fas fa-fire"></i> ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô & ‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î</span>
                    <span style="font-size:0.8rem; color:#666;">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡πÄ‡∏õ‡∏Ñ</span>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="color:var(--primary); font-weight:bold; margin-bottom:8px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î (Injector)</label>
                    <div class="cam-grid">
                        <div class="cam-btn active" id="btn_inj_std" onclick="setInjector('std', this)">‡πÄ‡∏î‡∏¥‡∏°</div>
                        <div class="cam-btn" id="btn_inj_6j" onclick="setInjector('6j', this)">6J</div>
                        <div class="cam-btn" id="btn_inj_6k" onclick="setInjector('6k', this)">6K</div>
                        <div class="cam-btn" id="btn_inj_8w" onclick="setInjector('8w', this)">8W</div>
                        <div class="cam-btn" id="btn_inj_10h" onclick="setInjector('10h', this)">10H</div>
                    </div>
                    <input type="hidden" id="injector" value="std">
                    <div id="injector_display_area"></div>
                </div>
                <div class="grid-2" style="border-top: 1px solid #333; padding-top: 15px;">
                    <div><label>‡∏ä‡∏ô‡∏¥‡∏î‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô</label><select id="fuel"><option value="95" selected>‡πÅ‡∏Å‡πä‡∏™‡πÇ‡∏ã‡∏Æ‡∏≠‡∏•‡πå 95</option><option value="e20">E20</option><option value="e85">E85</option><option value="race">Race Fuel</option></select></div>
                    <div><label>‡∏Å‡∏•‡πà‡∏≠‡∏á ECU</label><select id="ecu"><option value="std" selected>‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° (9.5k)</option><option value="remap">Remap (11k)</option><option value="open">Standalone (12.5k)</option></select></div>
                    <div style="grid-column: span 2;"><label>‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏´‡∏ô‡πâ‡∏≤ / ‡∏´‡∏•‡∏±‡∏á</label><div style="display:flex; gap:5px;"><input type="number" id="front" value="14" placeholder="‡∏´‡∏ô‡πâ‡∏≤"><input type="number" id="rear" value="34" placeholder="‡∏´‡∏•‡∏±‡∏á"></div></div>
                </div>
            </div>

            <div class="control-section" style="border-left-color: #ff5500;">
                <div class="section-header" style="justify-content: space-between;">
                    <span><i class="fas fa-fire-flame-curved"></i> ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢ (Exhaust)</span>
                    <span style="font-size:0.8rem; color:#666;">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡πÄ‡∏õ‡∏Ñ</span>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="color:#ff5500; font-weight:bold; margin-bottom:8px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡πà‡∏≠‡∏™‡∏π‡∏ï‡∏£</label>
                    <div class="cam-grid">
                        <div class="cam-btn active" id="btn_ex_std" onclick="setExhaust('std', this)">‡∏ó‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°</div>
                        <div class="cam-btn" id="btn_ex_mok" onclick="setExhaust('mok', this)">‡∏ú‡πà‡∏≤‡∏´‡∏°‡∏Å</div>
                        <div class="cam-btn" id="btn_ex_dang" onclick="setExhaust('dang', this)">‡∏ú‡πà‡∏≤‡∏î‡∏±‡∏á</div>
                    </div>
                    <input type="hidden" id="ex_type" value="std">
                    <div id="exhaust_display_area"></div>
                </div>
                <div class="grid-2" style="border-top: 1px solid #333; padding-top: 15px;">
                    <div><label>‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏≠‡∏ó‡πà‡∏≠ (Header)</label><select id="ex_size"><option value="25">25mm (‡πÄ‡∏î‡∏¥‡∏°/‡∏´‡∏°‡∏Å)</option><option value="28">28mm (‡∏•‡∏π‡∏Å 53-57)</option><option value="32">32mm (‡∏•‡∏π‡∏Å 58-60)</option><option value="35">35mm+ (Open/4‡∏ß‡∏≤‡∏•‡πå‡∏ß)</option></select></div>
                    <div></div> 
                </div>
            </div>

            <div class="control-section" style="border-left-color: var(--primary); background: rgba(255, 215, 0, 0.05);"><div class="section-header"><i class="fas fa-star"></i> KIMX OPTION</div>
                <div class="grid-2">
                    <div><label>‡πÑ‡∏•‡πà‡πÄ‡∏ö‡∏≤</label><select id="weight_stage"><option value="normal">‡πÄ‡∏î‡∏¥‡∏°‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô</option><option value="street">‡πÑ‡∏•‡πà‡∏ô‡πá‡∏≠‡∏ï‡πÑ‡∏ó‡πÄ‡∏ó</option><option value="drag">‡∏£‡∏ñ‡πÇ‡∏Ñ‡∏£‡∏á‡πÑ‡∏Å‡πà</option></select></div>
                    <div><label>‡∏™‡∏†‡∏≤‡∏û‡∏ñ‡∏ô‡∏ô</label><select id="road_slope"><option value="flat">‡∏ó‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥</option><option value="down">‡∏•‡∏á‡πÄ‡∏ô‡∏¥‡∏ô (‡πÑ‡∏´‡∏•‡∏¢‡∏≤‡∏ß)</option><option value="up">‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ô‡∏¥‡∏ô / ‡∏ï‡πâ‡∏≤‡∏ô‡∏•‡∏°</option></select></div>
                    <div><label>‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πà‡∏á</label><select id="stance"><option value="sit">‡∏ô‡∏±‡πà‡∏á‡∏Ç‡∏±‡∏ö</option><option value="tuck" selected>‡∏´‡∏°‡∏≠‡∏ö (Tuck)</option></select></div>
                    <div><label>‡∏¢‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á</label><select id="tire"><option value="big">‡∏¢‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏°</option><option value="small" selected>‡∏¢‡∏≤‡∏á‡∏õ‡πâ‡∏≤‡∏¢</option></select></div>
                </div>
            </div>
        </form>
        
        <div class="ai-log">
            <div class="ai-header"><i class="fas fa-robot"></i> KIMX MECHANIC SAYS:</div>
            <ul id="log_list" class="log-list"></ul>
        </div>

        <div class="partner-section">
            <div class="partner-badge"><i class="fas fa-bullhorn"></i> ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ (OPPORTUNITY)</div>
            <div class="partner-content">
                <div class="partner-title">üöÄ ‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏≠‡∏∞‡πÑ‡∏´‡∏•‡πà‡πÅ‡∏ï‡πà‡∏á?</div>
                <div class="partner-desc">
                    ‡∏£‡πà‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤ ‡πÄ‡∏à‡∏≤‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏≤‡∏¢‡∏ã‡∏¥‡πà‡∏á‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á<br>
                    ‡∏Å‡∏≤‡∏£‡∏±‡∏ô‡∏ï‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏Å‡∏ß‡πà‡∏≤ <strong style="color:#00ff66;">10,000+ ‡∏Ñ‡∏ô/‡∏ß‡∏±‡∏ô!</strong>
                </div>
                <a href="https://www.facebook.com/chokhthwitantraklu?locale=th_TH" target="_blank" class="fb-btn">
                    <i class="fab fa-facebook-messenger"></i> ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏•‡∏á‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ (Chat)
                </a>
            </div>
        </div>

    </div>

    <div id="supportModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal(event)">&times;</span>
            <h3 style="color:var(--primary); margin-top:0;"><i class="fas fa-heart"></i> ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤</h3>
            <img src="https://promptpay.io/0828057662.png" style="width:100%; border-radius:10px; margin:10px 0;">
            <div style="font-size:1.2rem; font-weight:bold; color:#fff;">082-805-7662</div>
            <div style="color:#888; font-size:0.9rem;">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå (PromptPay)</div>
        </div>
    </div>

    <div style="position: fixed; top: -9999px; left: -9999px;">
        <div id="share-card" class="share-card-box">
            <div class="card-header">
                <img src="kimxlogo.png" alt="KIMX Logo" class="card-logo">
                <h2 class="card-title">WAVE 125i TEST RUN</h2>
            </div>
            
            <div class="card-specs-grid">
                <div class="spec-item">
                    <i class="fas fa-syringe"></i> ‡∏•‡∏π‡∏Å‡∏™‡∏π‡∏ö: <span id="card_piston">-</span> mm
                </div>
                 <div class="spec-item">
                    <i class="fas fa-cogs"></i> ‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå: <span id="card_sprocket">-</span>
                </div>
                <div class="spec-item" style="grid-column: span 2;">
                    <i class="fas fa-wrench"></i> ‡πÅ‡∏Ñ‡∏°: <span id="card_cam">-</span>
                </div>
            </div>
    
            <div class="card-results">
                <div class="result-box-card speed">
                    <div class="lbl">TOP SPEED (KM/H)</div>
                    <div class="val" id="card_speed">0</div>
                </div>
                <div class="result-box-card hp">
                    <div class="lbl">HORSEPOWER (HP)</div>
                    <div class="val" id="card_hp">0.0</div>
                </div>
            </div>
    
            <div class="card-footer">
                AI TUNER BY KIMX : www.kimxtuner-ai.site
            </div>
        </div>
    </div>
    
    <script>
        function openModal() { document.getElementById('supportModal').style.display = 'flex'; }
        function closeModal(e) { 
            if(e.target.id === 'supportModal' || e.target.classList.contains('close-modal')) 
            document.getElementById('supportModal').style.display = 'none'; 
        }

        window.addEventListener('load', () => {
            const loader = document.getElementById('kimx-loader');
            setTimeout(() => { loader.classList.add('loaded'); setTimeout(() => { loader.style.display = 'none'; }, 600); }, 1000);
            updateProductDisplay('cam_display_area', camData['std']); 
            updateProductDisplay('rod_display_area', rodData['std']); 
            updateProductDisplay('injector_display_area', injectorData['std']); 
            updateProductDisplay('exhaust_display_area', exhaustData['std']);
        });

        // --- DATA SETS ---
        const camData = {
            'std': { title: "‡πÅ‡∏Ñ‡∏°‡πÄ‡∏î‡∏¥‡∏°‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô (Standard)", desc: "‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏Å 4.5mm | ‡πÑ‡∏≠‡∏î‡∏µ/‡πÑ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢ ‡πÄ‡∏î‡∏¥‡∏° <br> ‡πÄ‡∏á‡∏µ‡∏¢‡∏ö ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô", link: "" },
            'n1': { title: "KIMX CAMSHAFT N.1", desc: "‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏Å 5.1mm | ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å‡πÄ‡∏î‡∏¥‡∏° - 54mm <br> ‡∏ï‡πâ‡∏ô‡∏à‡∏±‡∏î ‡∏õ‡∏•‡∏≤‡∏¢‡πÑ‡∏´‡∏• ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏ö‡∏ß‡∏≤‡∏•‡πå‡∏ß", link: "https://s.shopee.co.th/5q14pOZvz1" },
            'n2': { title: "KIMX CAMSHAFT N.2 (Best Seller)", desc: "‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏Å 5.5mm | ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 55 - 58mm <br> ‡∏≠‡∏á‡∏®‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ô‡∏≤‡∏ô ‡∏ó‡πâ‡∏≤‡∏¢‡∏•‡∏∂‡∏Å ‡∏Ç‡∏±‡∏ö‡∏ó‡∏≤‡∏á‡πÑ‡∏Å‡∏•‡πÑ‡∏î‡πâ", link: "https://s.shopee.co.th/5q14pOZvz1" },
            'n3': { title: "KIMX CAMSHAFT N.3", desc: "‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏Å 5.8mm | ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 59mm ‡∏°‡∏µ‡∏ä‡∏±‡∏Å <br> ‡πÄ‡∏ô‡πâ‡∏ô‡∏£‡∏≠‡∏ö‡∏õ‡∏•‡∏≤‡∏¢ ‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ‡∏î‡∏±‡∏ô‡πÇ‡∏•", link: "https://s.shopee.co.th/5q14pOZvz1" },
            'open': { title: "KIMX OPEN SPEC", desc: "‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏Å 6.2mm+ | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏ñ‡πÅ‡∏Ç‡πà‡∏á Open / 4 ‡∏ß‡∏≤‡∏•‡πå‡∏ß <br> ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏ß‡∏≤‡∏•‡πå‡∏ß‡πÅ‡∏ï‡πà‡∏á", link: "https://s.shopee.co.th/5q14pOZvz1" }
        };
        const injectorData = {
            'std': { title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î‡πÄ‡∏î‡∏¥‡∏° (Stock)", desc: "‡∏à‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏ñ‡πÄ‡∏î‡∏¥‡∏°", link: "" },
            '6j': { title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 6 ‡∏£‡∏π J (125cc)", desc: "‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏≤‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏•‡πà‡∏Ç‡πâ‡∏≤‡∏á - ‡∏•‡∏π‡∏Å 53 (‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏ä‡∏±‡∏Å)", link: "https://s.shopee.co.th/BMi5QAee4" },
            '6k': { title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 6 ‡∏£‡∏π K (145cc - 160cc)", desc: "‡∏ù‡∏≠‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 53 - 54 (‡∏°‡∏µ‡∏ä‡∏±‡∏Å/‡∏´‡∏±‡∏ß‡∏ô‡∏π‡∏ô)", link: "https://s.shopee.co.th/BMi5QAee4" },
            '8w': { title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 8 ‡∏£‡∏π W (170cc+)", desc: "‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô E85/E20 ‡πÑ‡∏î‡πâ‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 56 - 58", link: "https://s.shopee.co.th/BMi5QAee4" },
            '10h': { title: "‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î 10 ‡∏£‡∏π H (Racing)", desc: "‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏ñ‡πÅ‡∏Ç‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏£‡∏á <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 59 ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ / ‡∏£‡∏ñ Open", link: "https://s.shopee.co.th/BMi5QAee4" }
        };
        const exhaustData = {
            'std': { title: "‡∏ó‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô (Standard)", desc: "‡πÄ‡∏á‡∏µ‡∏¢‡∏ö ‡∏ñ‡∏π‡∏Å‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ 100% <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏ñ‡πÄ‡∏î‡∏¥‡∏° - ‡∏•‡∏π‡∏Å 53 (‡πÄ‡∏ô‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)", link: "" },
            'mok': { title: "‡∏ó‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏´‡∏°‡∏Å (Silent Sport)", desc: "‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ô‡∏∏‡πà‡∏° ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 95dB ‡∏ß‡∏¥‡πà‡∏á‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏° <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 53 - 57 (‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô/‡∏ã‡∏¥‡πà‡∏á)", link: "https://s.shopee.co.th/9zqdnm18e3" },
            'dang': { title: "‡∏ó‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏î‡∏±‡∏á (Racing Open)", desc: "‡πÑ‡∏™‡πâ‡πÅ‡∏õ‡πä‡∏ö/‡∏ï‡∏∞‡πÅ‡∏Å‡∏£‡∏á ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡πà‡∏ô ‡∏•‡∏±‡πà‡∏ô‡∏ó‡∏∏‡πà‡∏á <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 58+ / ‡∏£‡∏ñ‡πÅ‡∏Ç‡πà‡∏á‡∏™‡∏ô‡∏≤‡∏°", link: "https://s.shopee.co.th/9zqdnm18e3" }
        };
        const rodData = {
            'std': { title: "‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö‡πÄ‡∏î‡∏¥‡∏° (Standard)", desc: "‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏ó‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô‡∏´‡∏≤‡∏¢‡∏´‡πà‡∏ß‡∏á <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å‡πÄ‡∏î‡∏¥‡∏° - 54mm (‡πÑ‡∏°‡πà‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏´‡∏ô‡∏±‡∏Å)", link: "" },
            'mono': { title: "‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö Mono (X-MAX Style)", desc: "‡∏Å‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ö‡∏≤ <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏•‡∏π‡∏Å 53 - 56 ‡∏î‡∏±‡∏ô‡πÇ‡∏•‡πÅ‡∏ä‡πà‡∏¢‡∏≤‡∏ß‡πÜ", link: "https://vt.tiktok.com/ZSHwxAssBDdqx-E4Hdt/" },
            'forged': { title: "‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö Forged CNC (Racing)", desc: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÄ‡∏Å‡∏£‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡∏ó‡∏ô‡∏£‡∏≠‡∏ö‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ 12,000 RPM <br> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏ñ‡πÅ‡∏Ç‡πà‡∏á / ‡∏•‡∏π‡∏Å‡πÇ‡∏ï 57++", link: "https://vt.tiktok.com/ZSHwxAssBDdqx-E4Hdt/" },
            'c3': { title: "‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö‡∏¢‡∏∑‡∏î‡∏ñ‡∏≤‡∏ß‡∏£ 3mm (Stroker Kit)", desc: "‡πÄ‡∏û‡∏¥‡πà‡∏° CC + ‡πÅ‡∏£‡∏á‡∏ö‡∏¥‡∏î‡∏°‡∏´‡∏≤‡∏®‡∏≤‡∏• <br> ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏õ‡∏∞‡πÄ‡∏Å‡πá‡∏ô‡∏ï‡∏µ‡∏ô‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô", link: "https://vt.tiktok.com/ZSHwxSp56TxsL-f9meJ/" },
            'c5': { title: "‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö‡∏¢‡∏∑‡∏î‡∏ñ‡∏≤‡∏ß‡∏£ 5mm (Super Open)", desc: "‡∏™‡∏∏‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏∏‡πà‡∏ô Open! ‡∏ã‡∏µ‡∏ã‡∏µ‡∏•‡πâ‡∏ô‡πÜ <br> ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡πÅ‡∏Ñ‡∏£‡πâ‡∏á+‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏™‡∏≤‡πÄ‡∏™‡∏∑‡πâ‡∏≠", link: "https://vt.tiktok.com/ZSHwxAdKhxySA-a8lVa/" }
        };

        // --- HELPER FUNCTIONS ---
        function updateProductDisplay(elementId, data) {
            const container = document.getElementById(elementId);
            if (!data) return;
            const btnHtml = data.link ? `<a href="${data.link}" target="_blank" class="shopee-btn"><i class="fas fa-shopping-cart"></i> ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</a>` : '';
            container.innerHTML = `<div class="product-info-box"><div class="spec-text"><div class="spec-title">${data.title}</div><div class="spec-detail">${data.desc}</div></div>${btnHtml}</div>`;
        }

        // --- SELECTION FUNCTIONS ---
        function setCam(val, el) { 
            document.getElementById('cam').value = val; 
            el.closest('.control-section').querySelectorAll('.cam-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            runDyno(false);
            updateProductDisplay('cam_display_area', camData[val]);
        }
        function setInjector(val, el) {
            document.getElementById('injector').value = val;
            el.closest('.control-section').querySelectorAll('.cam-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            runDyno(false);
            updateProductDisplay('injector_display_area', injectorData[val]);
        }
        function setExhaust(val, el) {
            document.getElementById('ex_type').value = val;
            el.closest('.control-section').querySelectorAll('.cam-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            runDyno(false);
            updateProductDisplay('exhaust_display_area', exhaustData[val]);
        }
        function setRod(val, el) {
            document.getElementById('rod').value = val;
            el.closest('.cam-grid').querySelectorAll('.cam-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            runDyno(false);
            updateProductDisplay('rod_display_area', rodData[val]);
        }

        // --- RESET FUNCTION ---
        function resetDefaults() {
            document.getElementById('piston').value = 53;
            document.getElementById('stroke').value = 63.1;
            document.getElementById('valve_size').value = 'std';
            document.getElementById('fuel').value = '95';
            document.getElementById('ecu').value = 'std';
            document.getElementById('front').value = 14;
            document.getElementById('rear').value = 34;
            document.getElementById('ex_size').value = '25';
            document.getElementById('weight_stage').value = 'normal';
            document.getElementById('road_slope').value = 'flat';
            document.getElementById('stance').value = 'tuck';
            document.getElementById('tire').value = 'small';

            // Trigger reset clicks
            document.getElementById('btn_rod_std').click();
            document.getElementById('btn_cam_std').click();
            document.getElementById('btn_inj_std').click();
            document.getElementById('btn_ex_std').click();
            
            runDyno(true);
        }

        // --- ONE-CLICK RECIPES FUNCTION ---
        function applyPreset(type) {
            resetDefaults();
            setTimeout(() => {
                if (type === 'step1') { // ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏•‡∏π‡∏Å 53
                    document.getElementById('piston').value = 53;
                    document.getElementById('btn_cam_n1').click();
                    document.getElementById('btn_inj_6j').click();
                    document.getElementById('btn_ex_mok').click();
                    document.getElementById('front').value = 14;
                    document.getElementById('rear').value = 34; // ‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô 34 ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö
                    document.getElementById('fuel').value = '95';
                } else if (type === 'step2') { // ‡∏î‡∏±‡∏ô‡πÇ‡∏• ‡∏•‡∏π‡∏Å 54-55
                    document.getElementById('piston').value = 54;
                    document.getElementById('btn_cam_n2').click();
                    document.getElementById('btn_inj_6k').click();
                    document.getElementById('btn_ex_mok').click();
                    document.getElementById('ex_size').value = '28';
                    document.getElementById('ecu').value = 'remap';
                    document.getElementById('front').value = 14;
                    document.getElementById('rear').value = 30;
                    document.getElementById('fuel').value = 'e85';
                } else if (type === 'step3') { // ‡∏Ç‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô ‡∏•‡∏π‡∏Å 57
                    document.getElementById('piston').value = 57;
                    document.getElementById('btn_rod_mono').click();
                    document.getElementById('btn_cam_n3').click();
                    document.getElementById('btn_inj_8w').click();
                    document.getElementById('btn_ex_dang').click();
                    document.getElementById('ex_size').value = '32';
                    document.getElementById('ecu').value = 'remap';
                    document.getElementById('front').value = 14;
                    document.getElementById('rear').value = 28;
                    document.getElementById('fuel').value = 'e85';
                } else if (type === 'step4') { // Open
                    document.getElementById('piston').value = 59;
                    document.getElementById('btn_rod_c5').click();
                    document.getElementById('btn_cam_open').click();
                    document.getElementById('btn_inj_10h').click();
                    document.getElementById('btn_ex_dang').click();
                    document.getElementById('ex_size').value = '35';
                    document.getElementById('ecu').value = 'open';
                    document.getElementById('valve_size').value = '30/34';
                    document.getElementById('front').value = 15;
                    document.getElementById('rear').value = 28;
                    document.getElementById('fuel').value = 'race';
                    document.getElementById('weight_stage').value = 'drag';
                }
                runDyno(true);
            }, 100);
        }

        // --- CALCULATION LOGIC (KEPT INTACT 100%) ---
        function calculateSpeed() {
            const p = parseFloat(document.getElementById('piston').value) || 0; 
            let s = parseFloat(document.getElementById('stroke').value) || 0;
            const front = parseFloat(document.getElementById('front').value) || 14; 
            const rear = parseFloat(document.getElementById('rear').value) || 30;
            const ecu = document.getElementById('ecu').value; 
            const cam = document.getElementById('cam').value;
            const weight = document.getElementById('weight_stage').value; 
            const road = document.getElementById('road_slope').value;
            const stance = document.getElementById('stance').value; 
            const valve = document.getElementById('valve_size').value; 
            const fuel = document.getElementById('fuel').value; 
            const rod = document.getElementById('rod').value; 
            const inj = document.getElementById('injector').value;
            const ex_type = document.getElementById('ex_type').value;
            const ex_size = parseInt(document.getElementById('ex_size').value);

            // CC Calculation
            let strokeBonus = 0;
            if(rod === 'c3') strokeBonus = 3; 
            if(rod === 'c5') strokeBonus = 5;
            let totalStroke = s + strokeBonus;
            const cc = (Math.PI * Math.pow(p/2, 2) * totalStroke) / 1000;
            document.getElementById('disp_cc').innerText = cc.toFixed(0);

            // RPM Logic
            let rpm = 9500; 
            if(ecu === 'remap') rpm = 11000; 
            if(ecu === 'open') rpm = 12500;
            document.getElementById('disp_rpm').innerText = (rpm/1000).toFixed(1);

            // Speed Theory
            const gearRatio = 0.928; const primary = 3.35; const finalRatio = rear / front; const tire = 1.85; 
            let theorySpeed = (rpm / (primary * gearRatio * finalRatio)) * tire * 0.06;

            let eff = 0.75; 
            let injStatus = 'ok'; let exStatus = 'ok';

            if (cc > 140 && inj === 'std') { eff -= 0.10; injStatus = 'lean'; } 
            if (cc < 125 && (inj === '8w' || inj === '10h')) { eff -= 0.08; injStatus = 'rich'; }
            if (cc > 160 && (inj === 'std' || inj === '6j')) { eff -= 0.15; injStatus = 'very_lean'; } 
            if (inj === '10h' && fuel !== 'e85' && fuel !== 'race') eff -= 0.05;

            if (p > 56 && valve === 'std') eff -= 0.05; 
            if (p > 54 && (valve === 'formula' || valve === '24/28')) eff += 0.03; 
            if (p > 58 && (valve === '27/31' || valve === '30/34')) eff += 0.05;
            if (totalStroke > 66 && rod === 'std') eff -= 0.20; 

            if (fuel === 'e20') eff += 0.01; if (fuel === 'e85') eff += 0.03; if (fuel === 'race') eff += 0.05;
            if (cam === 'n2' && rpm >= 10500) eff += 0.04; if (cam === 'open' && rpm >= 12000) eff += 0.06;
            if (weight === 'drag') eff += 0.05; if (stance === 'tuck') eff += 0.08; 
            if (road === 'down') eff += 0.12; 
            if (road === 'up') { eff -= 0.15; eff -= 0.05; } 

            if (ex_type === 'std' && p > 54) { eff -= 0.08; exStatus = 'choked_std'; }
            if (ex_type === 'mok') eff += 0.02; if (ex_type === 'dang') eff += 0.04;
            if (p <= 53 && ex_size >= 32) { eff -= 0.05; exStatus = 'too_big'; } 
            if (p >= 54 && p <= 55) { eff -= 0.06; }
            if (p >= 57 && ex_size <= 25) { eff -= 0.07; exStatus = 'choked_size'; } 
            if (p >= 59 && ecu === 'open') { eff -= 0.32; }
            
            let finalSpeed = theorySpeed * eff; 
            if (cc < 125 && finalSpeed > 140 && road !== 'down') finalSpeed = 135 + Math.random();

            // --- HORSEPOWER CALCULATION (WAVE 125i SPEC) ---
            // Base: 125cc Stock = ~9.2 HP
            let baseHp = cc * 0.074; 
            let hpMultiplier = 1.0;
            
            // Cam Bonus
            if (cam === 'n1') hpMultiplier += 0.08;
            if (cam === 'n2') hpMultiplier += 0.15;
            if (cam === 'n3') hpMultiplier += 0.18;
            if (cam === 'open') hpMultiplier += 0.25;

            // ECU & Fuel Bonus
            if (ecu === 'remap') hpMultiplier += 0.05;
            if (ecu === 'open') hpMultiplier += 0.10;
            if (fuel === 'e85' || fuel === 'race') hpMultiplier += 0.05;
            
            // Valve Bonus (for Big Bore)
            if (cc > 150 && (valve === '27/31' || valve === '30/34')) hpMultiplier += 0.10;

            // Penalties (Choke)
            if (ex_type === 'std' && cc > 135) hpMultiplier -= 0.15; // ‡∏ó‡πà‡∏≠‡∏≠‡∏±‡πâ‡∏ô
            if (injStatus === 'lean' || injStatus === 'very_lean') hpMultiplier -= 0.20; // ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ö‡∏≤‡∏á

            let finalHp = baseHp * hpMultiplier;
            // Cap Min/Max realism
            if(finalHp < 8) finalHp = 8.5;

            return { 
                speed: Math.floor(finalSpeed), 
                hp: finalHp.toFixed(1),
                cc: cc, p: p, v: valve, rod: rod, sb: strokeBonus, inj: injStatus, ex: exStatus, ex_s: ex_size, cam: cam, fuel: fuel 
            };
        }

        function runDyno(animate = true) {
            const result = calculateSpeed(); 
            const displaySpeed = document.getElementById('disp_speed');
            const displayHp = document.getElementById('disp_hp');
            
            generateAdvice(result);
            
            if (animate) {
                // Animate Speed
                let start = 0; let end = result.speed; let duration = 1000; let startTime = null;
                function animSpeed(currentTime) {
                    if (!startTime) startTime = currentTime; let progress = currentTime - startTime; 
                    let val = Math.min(Math.floor((progress / duration) * end), end);
                    if (progress < duration && val > 50) val += Math.floor(Math.random() * 3); 
                    displaySpeed.innerText = val;
                    if (progress < duration) requestAnimationFrame(animSpeed); else displaySpeed.innerText = end;
                } requestAnimationFrame(animSpeed);
                
                // Animate HP
                displayHp.innerText = result.hp; // Simple update for HP
            } else { 
                displaySpeed.innerText = result.speed; 
                displayHp.innerText = result.hp;
            }
        }

        // --- AI INTELLIGENT DIAGNOSTIC (KIMX EXPERT V.2) ---
        function generateAdvice(result) {
            const logs = document.getElementById('log_list'); logs.innerHTML = ""; 
            const addMsg = (type, title, desc, link = '') => {
                let cls = 'msg-info'; 
                if(type === 'danger') cls = 'msg-danger'; 
                if(type === 'warn') cls = 'msg-warn'; 
                if(type === 'good') cls = 'msg-success';
                
                const btnHtml = link ? `<a href="${link}" target="_blank" class="ai-shop-btn"><i class="fas fa-shopping-basket"></i> ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</a>` : '';
                logs.innerHTML += `<li class="ai-msg ${cls}"><strong>${title}</strong><span>${desc}</span>${btnHtml}</li>`;
            }

            // 1. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô -> ‡∏Ç‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
            if (result.p >= 56) { 
                addMsg('warn', 'üõ¢Ô∏è ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏Å‡∏≤‡∏£‡∏´‡∏•‡πà‡∏≠‡∏•‡∏∑‡πà‡∏ô', 
                '‡∏•‡∏π‡∏Å‡πÇ‡∏ï 56mm+ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏™‡∏π‡∏á! ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå 100% ‡πÄ‡∏ö‡∏≠‡∏£‡πå 10W-40 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏™‡∏π‡∏ö', 
                'https://s.shopee.co.th/7V9IqwbE7W'); 
            }

            // 2. ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå (Sprocket Check)
            const rearSprocket = parseFloat(document.getElementById('rear').value) || 30;
            if (result.cc > 140 && rearSprocket >= 30) {
                addMsg('info', '‚öôÔ∏è ‡πÑ‡∏•‡πà‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå (Gearing Advice)', 
                `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ü‡∏∑‡∏≠! ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏•‡∏î‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏á‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ö‡∏≠‡∏£‡πå 28-27 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏≤‡∏¢‡πÑ‡∏´‡∏•‡∏•‡∏∂‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô`, 
                'https://s.shopee.co.th/30gtUmTbHs');
            }

            // 3. ‡∏à‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏Ñ‡∏≠‡∏Ç‡∏ß‡∏î (Bottleneck: Valve)
            if (result.p >= 54 && result.v === 'std') {
                addMsg('warn', '‚õî ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏≠‡∏±‡πâ‡∏ô (Airflow Restriction)', 
                '‡∏•‡∏π‡∏Å 54mm ‡πÅ‡∏ï‡πà‡∏ß‡∏≤‡∏•‡πå‡∏ß‡πÄ‡∏î‡∏¥‡∏° ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏≠! ‡∏£‡∏ñ‡∏à‡∏∞‡∏ï‡∏∑‡πâ‡∏≠‡∏õ‡∏•‡∏≤‡∏¢ ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏ß‡∏≤‡∏•‡πå‡∏ß 24/28 ‡∏Ñ‡∏£‡∏±‡∏ö');
            }

            // 4. ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏ß‡∏≤‡∏•‡πå‡∏ß (Valve Spring)
            if (result.cam === 'n2' || result.cam === 'n3' || result.cam === 'open') {
                addMsg('danger', 'üö© ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏ß‡∏≤‡∏•‡πå‡∏ß‡∏•‡∏≠‡∏¢ (Valve Float)', 
                '‡πÉ‡∏™‡πà‡πÅ‡∏Ñ‡∏°‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏≠‡∏ö‡∏à‡∏±‡∏î ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô "‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏ß‡∏≤‡∏•‡πå‡∏ß‡πÅ‡∏ï‡πà‡∏á" ‡πÑ‡∏°‡πà‡∏á‡∏±‡πâ‡∏ô‡∏ß‡∏≤‡∏•‡πå‡∏ß‡∏à‡∏∞‡πÇ‡∏´‡∏°‡πà‡∏á‡∏•‡∏π‡∏Å‡∏™‡∏π‡∏ö‡∏û‡∏±‡∏á‡∏¢‡∏±‡∏ö!', 
                'https://s.shopee.co.th/3LJjtXGEy2');
            }

            // 5. ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏•‡∏±‡∏ó‡∏ä‡πå
            if (result.cc > 145) { 
                addMsg('warn', '‚öôÔ∏è ‡∏Ñ‡∏•‡∏±‡∏ó‡∏ä‡πå‡∏≠‡∏≤‡∏à‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ', 
                '‡πÅ‡∏£‡∏á‡∏ö‡∏¥‡∏î‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏õ‡∏£‡∏¥‡∏á‡∏Ñ‡∏•‡∏±‡∏ó‡∏ä‡πå‡πÅ‡∏ï‡πà‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ú‡πà‡∏ô‡∏Ñ‡∏•‡∏±‡∏ó‡∏ä‡πå‡∏ã‡∏¥‡πà‡∏á', 
                'https://s.shopee.co.th/13HvX39MZ'); 
            }

            // 6. ‡∏´‡∏±‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô & ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô
            if (result.fuel === 'e85' || result.fuel === 'race') { 
                addMsg('info', '‚ö° ‡∏´‡∏±‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô (Spark Plug)', 
                '‡πÉ‡∏ä‡πâ E85 ‡∏Ñ‡∏ß‡∏£‡∏Ç‡∏¢‡∏±‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏´‡∏±‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏¢‡πá‡∏ô‡∏•‡∏á (NGK ‡πÄ‡∏ö‡∏≠‡∏£‡πå 8-9)', 
                'https://s.shopee.co.th/8AOzeicU76'); 
            }

            // 7. ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á (Critical)
            if (result.inj === 'lean') { addMsg('danger', '‚õî ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢: ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ö‡∏≤‡∏á!', '‡∏•‡∏π‡∏Å‡πÇ‡∏ï‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î‡πÄ‡∏î‡∏¥‡∏° = ‡∏û‡∏±‡∏á‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô! ‡∏Å‡∏î‡∏™‡∏±‡πà‡∏á‡∏´‡∏±‡∏ß‡∏â‡∏µ‡∏î‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ô‡∏µ‡πâ', 'https://shopee.co.th/your-injector-shop-link'); }
            if (result.rod === 'std' && result.sb > 0) { addMsg('danger', '‚õî ‡∏Å‡πâ‡∏≤‡∏ô‡∏™‡∏π‡∏ö‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢', '‡∏Å‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏≥‡∏ä‡∏±‡∏Å ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏Å‡πâ‡∏≤‡∏ô‡∏Ç‡∏≤‡∏î‡∏ó‡∏∞‡∏•‡∏∏‡πÅ‡∏Ñ‡∏£‡πâ‡∏á! ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏Å‡πâ‡∏≤‡∏ô Forged'); }

            // 8. ‡∏Ñ‡∏≥‡∏ä‡∏° (Good Setup)
            if (result.p < 55 && result.cam === 'std') { 
                addMsg('info', 'üí° KIMX TIP: ‡∏™‡∏π‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î', '‡∏•‡∏≠‡∏á‡∏ä‡∏∏‡∏î "‡πÅ‡∏Ñ‡∏° N1 + ‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå 14/32" ‡∏™‡πÄ‡∏ï‡πá‡∏õ‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ', 'https://s.shopee.co.th/BMi5QAee4'); 
            }

            // 9. ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å 53 (User Request)
            if (result.p === 53) {
                addMsg('good', 'üîß ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏™‡πÄ‡∏ï‡πá‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡∏•‡∏π‡∏Å 53)', 
                '‡∏™‡∏π‡∏ï‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå 14/34 ‡πÄ‡∏ô‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏à‡∏±‡∏î ‡∏Ç‡∏µ‡πà‡∏™‡∏ô‡∏∏‡∏Å‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á! \n' +
                '‚Ä¢ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ: ‡∏≠‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏û‡∏∏‡πà‡∏á ‡πÄ‡∏£‡πà‡∏á‡πÅ‡∏ã‡∏á‡∏ó‡∏±‡∏ô‡πÉ‡∏à ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô\n' +
                '‚Ä¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏õ‡∏•‡∏≤‡∏¢: ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 136 km/h (‡∏ï‡∏≤‡∏°‡πÑ‡∏°‡∏•‡πå GPS)\n' +
                '‚Ä¢ ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏õ‡∏•‡∏≤‡∏¢‡πÑ‡∏´‡∏•‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏î‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏á‡∏•‡∏á‡∏Ñ‡∏£‡∏±‡∏ö');
            }
        }

        runDyno(false);

        // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (Requires html2canvas) ---
        function captureImage(btn) {
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û...';
            btn.style.opacity = '0.7';
            btn.disabled = true;

            // 1. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô "‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î" ‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà
            document.getElementById('card_piston').innerText = document.getElementById('piston').value;
            document.getElementById('card_sprocket').innerText = document.getElementById('front').value + ' / ' + document.getElementById('rear').value;
            
            const camVal = document.getElementById('cam').value;
            document.getElementById('card_cam').innerText = camData[camVal] ? camData[camVal].title : '‡πÅ‡∏Ñ‡∏°‡πÄ‡∏î‡∏¥‡∏°';

            document.getElementById('card_speed').innerText = document.getElementById('disp_speed').innerText;
            document.getElementById('card_hp').innerText = document.getElementById('disp_hp').innerText;

            // 2. ‡πÉ‡∏ä‡πâ html2canvas ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö‡∏ô‡∏±‡πâ‡∏ô
            const cardElement = document.getElementById('share-card');
            
            html2canvas(cardElement, {
                scale: 2, // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏°‡∏ä‡∏±‡∏î 2 ‡πÄ‡∏ó‡πà‡∏≤
                backgroundColor: null, // ‡πÉ‡∏´‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™‡∏ï‡∏≤‡∏° CSS
                useCORS: true // ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏Ç‡πâ‡∏≤‡∏°‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡πÑ‡∏î‡πâ (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πâ)
            }).then(canvas => {
                // 3. ‡πÅ‡∏õ‡∏•‡∏á canvas ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
                const imageURL = canvas.toDataURL("image/png");
                const link = document.createElement('a');
                link.href = imageURL;
                link.download = 'KIMX-WAVE125i-RESULT.png'; // ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ
                
                // 4. ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                // 5. ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°
                btn.innerHTML = '<i class="fas fa-check-circle"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.opacity = '1';
                    btn.disabled = false;
                }, 2000);
            }).catch(err => {
                console.error("Error capturing image:", err);
                btn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î';
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                btn.disabled = false;
            });
        }
    </script>
</body>
</html>